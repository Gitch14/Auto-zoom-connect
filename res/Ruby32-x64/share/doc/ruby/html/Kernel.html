<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>module Kernel - Documentation for Ruby 3.2</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
  var index_rel_prefix = "./";
</script>

<script src="./js/navigation.js" defer></script>
<script src="./js/search.js" defer></script>
<script src="./js/search_index.js" defer></script>
<script src="./js/searcher.js" defer></script>
<script src="./js/darkfish.js" defer></script>

<link href="./css/fonts.css" rel="stylesheet">
<link href="./css/rdoc.css" rel="stylesheet">


<body id="top" role="document" class="module">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>



  <ul class="link-list" role="directory">
              <li>
            <details open>
              <summary>      <a href="#module-Kernel-label-What-27s+Here">What’s Here</a>
</summary>
              <ul class="link-list" role="directory">
                          <li>      <a href="#module-Kernel-label-Converting">Converting</a>
          <li>      <a href="#module-Kernel-label-Querying">Querying</a>
          <li>      <a href="#module-Kernel-label-Exiting">Exiting</a>
          <li>      <a href="#module-Kernel-label-Exceptions">Exceptions</a>
          <li>      <a href="#module-Kernel-label-IO">IO</a>
          <li>      <a href="#module-Kernel-label-Procs">Procs</a>
          <li>      <a href="#module-Kernel-label-Tracing">Tracing</a>
          <li>      <a href="#module-Kernel-label-Subprocesses">Subprocesses</a>
          <li>      <a href="#module-Kernel-label-Loading">Loading</a>
          <li>      <a href="#module-Kernel-label-Yielding">Yielding</a>
          <li>      <a href="#module-Kernel-label-Random+Values">Random Values</a>
          <li>      <a href="#module-Kernel-label-Other">Other</a>

              </ul>
            </details>
          </li>

  </ul>
</div>


  <div id="class-metadata">
    
    
    
    
    
<!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    <li ><a href="#method-c-URI">::URI</a>
    <li ><a href="#method-c-pp">::pp</a>
    <li ><a href="#method-i-Array">#Array</a>
    <li ><a href="#method-i-BigDecimal">#BigDecimal</a>
    <li ><a href="#method-i-Complex">#Complex</a>
    <li ><a href="#method-i-Float">#Float</a>
    <li ><a href="#method-i-Hash">#Hash</a>
    <li ><a href="#method-i-Integer">#Integer</a>
    <li ><a href="#method-i-JSON">#JSON</a>
    <li ><a href="#method-i-Pathname">#Pathname</a>
    <li ><a href="#method-i-Rational">#Rational</a>
    <li ><a href="#method-i-String">#String</a>
    <li ><a href="#method-i-URI">#URI</a>
    <li ><a href="#method-i-__callee__">#__callee__</a>
    <li ><a href="#method-i-__dir__">#__dir__</a>
    <li ><a href="#method-i-__method__">#__method__</a>
    <li ><a href="#method-i-60">#`</a>
    <li ><a href="#method-i-abort">#abort</a>
    <li ><a href="#method-i-at_exit">#at_exit</a>
    <li ><a href="#method-i-autoload">#autoload</a>
    <li ><a href="#method-i-autoload-3F">#autoload?</a>
    <li ><a href="#method-i-binding">#binding</a>
    <li ><a href="#method-i-block_given-3F">#block_given?</a>
    <li ><a href="#method-i-callcc">#callcc</a>
    <li ><a href="#method-i-caller">#caller</a>
    <li ><a href="#method-i-caller_locations">#caller_locations</a>
    <li ><a href="#method-i-catch">#catch</a>
    <li ><a href="#method-i-chomp">#chomp</a>
    <li ><a href="#method-i-chop">#chop</a>
    <li ><a href="#method-i-class">#class</a>
    <li ><a href="#method-i-clone">#clone</a>
    <li ><a href="#method-i-eval">#eval</a>
    <li ><a href="#method-i-exec">#exec</a>
    <li ><a href="#method-i-exit">#exit</a>
    <li ><a href="#method-i-exit-21">#exit!</a>
    <li ><a href="#method-i-fail">#fail</a>
    <li ><a href="#method-i-fork">#fork</a>
    <li ><a href="#method-i-format">#format</a>
    <li ><a href="#method-i-frozen-3F">#frozen?</a>
    <li ><a href="#method-i-gem">#gem</a>
    <li ><a href="#method-i-gets">#gets</a>
    <li ><a href="#method-i-global_variables">#global_variables</a>
    <li ><a href="#method-i-gsub">#gsub</a>
    <li ><a href="#method-i-iterator-3F">#iterator?</a>
    <li ><a href="#method-i-j">#j</a>
    <li ><a href="#method-i-jj">#jj</a>
    <li ><a href="#method-i-lambda">#lambda</a>
    <li ><a href="#method-i-load">#load</a>
    <li ><a href="#method-i-local_variables">#local_variables</a>
    <li ><a href="#method-i-loop">#loop</a>
    <li ><a href="#method-i-open">#open</a>
    <li ><a href="#method-i-p">#p</a>
    <li ><a href="#method-i-pp">#pp</a>
    <li ><a href="#method-i-pretty_inspect">#pretty_inspect</a>
    <li ><a href="#method-i-print">#print</a>
    <li ><a href="#method-i-printf">#printf</a>
    <li ><a href="#method-i-proc">#proc</a>
    <li ><a href="#method-i-putc">#putc</a>
    <li ><a href="#method-i-puts">#puts</a>
    <li ><a href="#method-i-raise">#raise</a>
    <li ><a href="#method-i-rand">#rand</a>
    <li ><a href="#method-i-readline">#readline</a>
    <li ><a href="#method-i-readlines">#readlines</a>
    <li ><a href="#method-i-require">#require</a>
    <li ><a href="#method-i-require_relative">#require_relative</a>
    <li ><a href="#method-i-select">#select</a>
    <li ><a href="#method-i-set_trace_func">#set_trace_func</a>
    <li ><a href="#method-i-sleep">#sleep</a>
    <li ><a href="#method-i-spawn">#spawn</a>
    <li ><a href="#method-i-sprintf">#sprintf</a>
    <li ><a href="#method-i-srand">#srand</a>
    <li ><a href="#method-i-sub">#sub</a>
    <li ><a href="#method-i-syntax_suggest_original_load">#syntax_suggest_original_load</a>
    <li ><a href="#method-i-syntax_suggest_original_require">#syntax_suggest_original_require</a>
    <li ><a href="#method-i-syntax_suggest_original_require_relative">#syntax_suggest_original_require_relative</a>
    <li ><a href="#method-i-syscall">#syscall</a>
    <li ><a href="#method-i-system">#system</a>
    <li ><a href="#method-i-tap">#tap</a>
    <li ><a href="#method-i-test">#test</a>
    <li ><a href="#method-i-then">#then</a>
    <li ><a href="#method-i-throw">#throw</a>
    <li ><a href="#method-i-trace_var">#trace_var</a>
    <li ><a href="#method-i-trap">#trap</a>
    <li ><a href="#method-i-untrace_var">#untrace_var</a>
    <li ><a href="#method-i-warn">#warn</a>
    <li ><a href="#method-i-y">#y</a>
    <li ><a href="#method-i-yield_self">#yield_self</a>
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="module-Kernel">
  <h1 id="module-Kernel" class="module">
    module Kernel
  </h1>

  <section class="description">
    
<p>Monkey patch kernel to ensure that all ‘require` calls call the same method</p>

<p>The <a href="Kernel.html"><code>Kernel</code></a> module is included by class <a href="Object.html"><code>Object</code></a>, so its methods are available in every Ruby object.</p>

<p>The <a href="Kernel.html"><code>Kernel</code></a> instance methods are documented in class <a href="Object.html"><code>Object</code></a> while the module methods are documented here.  These methods are called without a receiver and thus can be called in functional form:</p>

<pre class="ruby"><span class="ruby-identifier">sprintf</span> <span class="ruby-string">&quot;%.1f&quot;</span>, <span class="ruby-value">1.234</span> <span class="ruby-comment">#=&gt; &quot;1.2&quot;</span>
</pre>

<h2 id="module-Kernel-label-What-27s+Here">What’s Here<span><a href="#module-Kernel-label-What-27s+Here">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Module Kernel provides methods that are useful for:</p>
<ul><li>
<p><a href="Kernel.html#module-Kernel-label-Converting">Converting</a></p>
</li><li>
<p><a href="Kernel.html#module-Kernel-label-Querying">Querying</a></p>
</li><li>
<p><a href="Kernel.html#module-Kernel-label-Exiting">Exiting</a></p>
</li><li>
<p><a href="Kernel.html#module-Kernel-label-Exceptions">Exceptions</a></p>
</li><li>
<p><a href="Kernel.html#module-Kernel-label-IO">IO</a></p>
</li><li>
<p><a href="Kernel.html#module-Kernel-label-Procs">Procs</a></p>
</li><li>
<p><a href="Kernel.html#module-Kernel-label-Tracing">Tracing</a></p>
</li><li>
<p><a href="Kernel.html#module-Kernel-label-Subprocesses">Subprocesses</a></p>
</li><li>
<p><a href="Kernel.html#module-Kernel-label-Loading">Loading</a></p>
</li><li>
<p><a href="Kernel.html#module-Kernel-label-Yielding">Yielding</a></p>
</li><li>
<p><a href="Kernel.html#module-Kernel-label-Random+Values">Random Values</a></p>
</li><li>
<p><a href="Kernel.html#module-Kernel-label-Other">Other</a></p>
</li></ul>

<h3 id="module-Kernel-label-Converting">Converting<span><a href="#module-Kernel-label-Converting">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p><a href="Kernel.html#method-i-Array"><code>Array</code></a>: Returns an <a href="Array.html"><code>Array</code></a> based on the given argument.</p>
</li><li>
<p><a href="Kernel.html#method-i-Complex"><code>Complex</code></a>: Returns a <a href="Complex.html"><code>Complex</code></a> based on the given arguments.</p>
</li><li>
<p><a href="Kernel.html#method-i-Float"><code>Float</code></a>: Returns a <a href="Float.html"><code>Float</code></a> based on the given arguments.</p>
</li><li>
<p><a href="Kernel.html#method-i-Hash"><code>Hash</code></a>: Returns a <a href="Hash.html"><code>Hash</code></a> based on the given argument.</p>
</li><li>
<p><a href="Kernel.html#method-i-Integer"><code>Integer</code></a>: Returns an <a href="Integer.html"><code>Integer</code></a> based on the given arguments.</p>
</li><li>
<p><a href="Kernel.html#method-i-Rational"><code>Rational</code></a>: Returns a <a href="Rational.html"><code>Rational</code></a> based on the given arguments.</p>
</li><li>
<p><a href="Kernel.html#method-i-String"><code>String</code></a>: Returns a <a href="String.html"><code>String</code></a> based on the given argument.</p>
</li></ul>

<h3 id="module-Kernel-label-Querying">Querying<span><a href="#module-Kernel-label-Querying">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p><a href="Kernel.html#method-i-__callee__"><code>__callee__</code></a>: Returns the called name of the current method as a symbol.</p>
</li><li>
<p><a href="Kernel.html#method-i-__dir__"><code>__dir__</code></a>: Returns the path to the directory from which the current method is called.</p>
</li><li>
<p><a href="Kernel.html#method-i-__method__"><code>__method__</code></a>: Returns the name of the current method as a symbol.</p>
</li><li>
<p><a href="Kernel.html#method-i-autoload-3F"><code>autoload?</code></a>: Returns the file to be loaded when the given module is referenced.</p>
</li><li>
<p><a href="Kernel.html#method-i-binding"><code>binding</code></a>: Returns a <a href="Binding.html"><code>Binding</code></a> for the context at the point of call.</p>
</li><li>
<p><a href="Kernel.html#method-i-block_given-3F"><code>block_given?</code></a>: Returns <code>true</code> if a block was passed to the calling method.</p>
</li><li>
<p><a href="Kernel.html#method-i-caller"><code>caller</code></a>: Returns the current execution stack as an array of strings.</p>
</li><li>
<p><a href="Kernel.html#method-i-caller_locations"><code>caller_locations</code></a>: Returns the current execution stack as an array of <a href="Thread/Backtrace/Location.html"><code>Thread::Backtrace::Location</code></a> objects.</p>
</li><li>
<p><a href="Kernel.html#method-i-class"><code>class</code></a>: Returns the class of <code>self</code>.</p>
</li><li>
<p><a href="Kernel.html#method-i-frozen-3F"><code>frozen?</code></a>: Returns whether <code>self</code> is frozen.</p>
</li><li>
<p><a href="Kernel.html#method-i-global_variables"><code>global_variables</code></a>: Returns an array of global variables as symbols.</p>
</li><li>
<p><a href="Kernel.html#method-i-local_variables"><code>local_variables</code></a>: Returns an array of local variables as symbols.</p>
</li><li>
<p><a href="Kernel.html#method-i-test"><code>test</code></a>: Performs specified tests on the given single file or pair of files.</p>
</li></ul>

<h3 id="module-Kernel-label-Exiting">Exiting<span><a href="#module-Kernel-label-Exiting">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p><a href="Kernel.html#method-i-abort"><code>abort</code></a>: Exits the current process after printing the given arguments.</p>
</li><li>
<p><a href="Kernel.html#method-i-at_exit"><code>at_exit</code></a>: Executes the given block when the process exits.</p>
</li><li>
<p><a href="Kernel.html#method-i-exit"><code>exit</code></a>: Exits the current process after calling any registered <code>at_exit</code> handlers.</p>
</li><li>
<p><a href="Kernel.html#method-i-exit-21"><code>exit!</code></a>: Exits the current process without calling any registered <code>at_exit</code> handlers.</p>
</li></ul>

<h3 id="module-Kernel-label-Exceptions">Exceptions<span><a href="#module-Kernel-label-Exceptions">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p><a href="Kernel.html#method-i-catch"><code>catch</code></a>: Executes the given block, possibly catching a thrown object.</p>
</li><li>
<p><a href="Kernel.html#method-i-raise"><code>raise</code></a> (aliased as <a href="Kernel.html#method-i-fail"><code>fail</code></a>): Raises an exception based on the given arguments.</p>
</li><li>
<p><a href="Kernel.html#method-i-throw"><code>throw</code></a>: Returns from the active catch block waiting for the given tag.</p>
</li></ul>

<h3 id="module-Kernel-label-IO">IO<span><a href="#module-Kernel-label-IO">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p><a href="Kernel.html#method-c-pp"><code>::pp</code></a>: Prints the given objects in pretty form.</p>
</li><li>
<p><a href="Kernel.html#method-i-gets"><code>gets</code></a>: Returns and assigns to <code>$_</code> the next line from the current input.</p>
</li><li>
<p><a href="Kernel.html#method-i-open"><code>open</code></a>: Creates an <a href="IO.html"><code>IO</code></a> object connected to the given stream, file, or subprocess.</p>
</li><li>
<p><a href="Kernel.html#method-i-p"><code>p</code></a>:  Prints the given objects’ inspect output to the standard output.</p>
</li><li>
<p><a href="Kernel.html#method-i-print"><code>print</code></a>: Prints the given objects to standard output without a newline.</p>
</li><li>
<p><a href="Kernel.html#method-i-printf"><code>printf</code></a>: Prints the string resulting from applying the given format string to any additional arguments.</p>
</li><li>
<p><a href="Kernel.html#method-i-putc"><code>putc</code></a>: Equivalent to &lt;tt.$stdout.putc(object)&lt;/tt&gt; for the given object.</p>
</li><li>
<p><a href="Kernel.html#method-i-puts"><code>puts</code></a>: Equivalent to <code>$stdout.puts(*objects)</code> for the given objects.</p>
</li><li>
<p><a href="Kernel.html#method-i-readline"><code>readline</code></a>: Similar to <a href="Kernel.html#method-i-gets"><code>gets</code></a>, but raises an exception at the end of file.</p>
</li><li>
<p><a href="Kernel.html#method-i-readlines"><code>readlines</code></a>: Returns an array of the remaining lines from the current input.</p>
</li><li>
<p><a href="Kernel.html#method-i-select"><code>select</code></a>: Same as <a href="IO.html#method-c-select"><code>IO.select</code></a>.</p>
</li></ul>

<h3 id="module-Kernel-label-Procs">Procs<span><a href="#module-Kernel-label-Procs">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p><a href="Kernel.html#method-i-lambda"><code>lambda</code></a>: Returns a lambda proc for the given block.</p>
</li><li>
<p><a href="Kernel.html#method-i-proc"><code>proc</code></a>: Returns a new <a href="Proc.html"><code>Proc</code></a>; equivalent to <a href="Proc.html#method-c-new"><code>Proc.new</code></a>.</p>
</li></ul>

<h3 id="module-Kernel-label-Tracing">Tracing<span><a href="#module-Kernel-label-Tracing">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p><a href="Kernel.html#method-i-set_trace_func"><code>set_trace_func</code></a>: Sets the given proc as the handler for tracing, or disables tracing if given <code>nil</code>.</p>
</li><li>
<p><a href="Kernel.html#method-i-trace_var"><code>trace_var</code></a>: Starts tracing assignments to the given global variable.</p>
</li><li>
<p><a href="Kernel.html#method-i-untrace_var"><code>untrace_var</code></a>: Disables tracing of assignments to the given global variable.</p>
</li></ul>

<h3 id="module-Kernel-label-Subprocesses">Subprocesses<span><a href="#module-Kernel-label-Subprocesses">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p><a href="Kernel.html#method-i-60">`command`</a>: Returns the standard output of running <code>command</code> in a subshell.</p>
</li><li>
<p><a href="Kernel.html#method-i-exec"><code>exec</code></a>: Replaces current process with a new process.</p>
</li><li>
<p><a href="Kernel.html#method-i-fork"><code>fork</code></a>: Forks the current process into two processes.</p>
</li><li>
<p><a href="Kernel.html#method-i-spawn"><code>spawn</code></a>: Executes the given command and returns its pid without waiting for completion.</p>
</li><li>
<p><a href="Kernel.html#method-i-system"><code>system</code></a>: Executes the given command in a subshell.</p>
</li></ul>

<h3 id="module-Kernel-label-Loading">Loading<span><a href="#module-Kernel-label-Loading">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p><a href="Kernel.html#method-i-autoload"><code>autoload</code></a>: Registers the given file to be loaded when the given constant is first referenced.</p>
</li><li>
<p><a href="Kernel.html#method-i-load"><code>load</code></a>: Loads the given Ruby file.</p>
</li><li>
<p><a href="Kernel.html#method-i-require"><code>require</code></a>: Loads the given Ruby file unless it has already been loaded.</p>
</li><li>
<p><a href="Kernel.html#method-i-require_relative"><code>require_relative</code></a>: Loads the Ruby file path relative to the calling file, unless it has already been loaded.</p>
</li></ul>

<h3 id="module-Kernel-label-Yielding">Yielding<span><a href="#module-Kernel-label-Yielding">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p><a href="Kernel.html#method-i-tap"><code>tap</code></a>: Yields <code>self</code> to the given block; returns <code>self</code>.</p>
</li><li>
<p><a href="Kernel.html#method-i-then"><code>then</code></a> (aliased as <a href="Kernel.html#method-i-yield_self"><code>yield_self</code></a>): Yields <code>self</code> to the block and returns the result of the block.</p>
</li></ul>

<h3 id="module-Kernel-label-Random+Values">Random Values<span><a href="#module-Kernel-label-Random+Values">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p><a href="Kernel.html#method-i-rand"><code>rand</code></a>: Returns a pseudo-random floating point number strictly between 0.0 and 1.0.</p>
</li><li>
<p><a href="Kernel.html#method-i-srand"><code>srand</code></a>: Seeds the pseudo-random number generator with the given number.</p>
</li></ul>

<h3 id="module-Kernel-label-Other">Other<span><a href="#module-Kernel-label-Other">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p><a href="Kernel.html#method-i-eval"><code>eval</code></a>: Evaluates the given string as Ruby code.</p>
</li><li>
<p><a href="Kernel.html#method-i-loop"><code>loop</code></a>: Repeatedly executes the given block.</p>
</li><li>
<p><a href="Kernel.html#method-i-sleep"><code>sleep</code></a>: Suspends the current thread for the given number of seconds.</p>
</li><li>
<p><a href="Kernel.html#method-i-sprintf"><code>sprintf</code></a> (aliased as <a href="Kernel.html#method-i-format"><code>format</code></a>): Returns the string resulting from applying the given format string to any additional arguments.</p>
</li><li>
<p><a href="Kernel.html#method-i-syscall"><code>syscall</code></a>: Runs an operating system call.</p>
</li><li>
<p><a href="Kernel.html#method-i-trap"><code>trap</code></a>: Specifies the handling of system signals.</p>
</li><li>
<p><a href="Kernel.html#method-i-warn"><code>warn</code></a>: Issue a warning based on the given messages and options.</p>
</li></ul>

  </section>

  <section id="5Buntitled-5D" class="documentation-section">





     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

      <div id="method-c-URI" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">URI</span><span
              class="method-args">(uri)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Returns <code>uri</code> converted to an <a href="URI.html"><code>URI</code></a> object.</p>

          <div class="method-source-code" id="URI-source">
            <pre><span class="ruby-comment"># File lib/uri/common.rb, line 718</span>
<span class="ruby-keyword">def</span> <span class="ruby-constant">URI</span>(<span class="ruby-identifier ruby-title">uri</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">Generic</span>)
    <span class="ruby-identifier">uri</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">uri</span> = <span class="ruby-constant">String</span>.<span class="ruby-identifier">try_convert</span>(<span class="ruby-identifier">uri</span>)
    <span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">uri</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>,
      <span class="ruby-string">&quot;bad argument (expected URI object or URI string)&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-c-pp" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">pp</span><span
              class="method-args">(*objs)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>prints arguments in pretty form.</p>

<p>pp returns argument(s).</p>

          <div class="method-source-code" id="pp-source">
            <pre><span class="ruby-comment"># File lib/pp.rb, line 644</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">pp</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">objs</span>)
  <span class="ruby-identifier">objs</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">obj</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">PP</span>.<span class="ruby-identifier">pp</span>(<span class="ruby-identifier">obj</span>)
  }
  <span class="ruby-identifier">objs</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">1</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">objs</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">objs</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: pp
        </div>

      </div>

    </section>

     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

      <div id="method-i-Array" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              Array(object) &rarr; object or new_array
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Returns an array converted from <code>object</code>.</p>

<p>Tries to convert <code>object</code> to an array using <code>to_ary</code> first and <code>to_a</code> second:</p>

<pre class="ruby"><span class="ruby-constant">Array</span>([<span class="ruby-value">0</span>, <span class="ruby-value">1</span>, <span class="ruby-value">2</span>])        <span class="ruby-comment"># =&gt; [0, 1, 2]</span>
<span class="ruby-constant">Array</span>({<span class="ruby-value">foo:</span> <span class="ruby-value">0</span>, <span class="ruby-value">bar:</span> <span class="ruby-value">1</span>}) <span class="ruby-comment"># =&gt; [[:foo, 0], [:bar, 1]]</span>
<span class="ruby-constant">Array</span>(<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">4</span>)             <span class="ruby-comment"># =&gt; [0, 1, 2, 3, 4]</span>
</pre>

<p>Returns <code>object</code> in an array, <code>[object]</code>, if <code>object</code> cannot be converted:</p>

<pre class="ruby"><span class="ruby-constant">Array</span>(<span class="ruby-value">:foo</span>)             <span class="ruby-comment"># =&gt; [:foo]</span>
</pre>

          <div class="method-source-code" id="Array-source">
            <pre>static VALUE
rb_f_array(VALUE obj, VALUE arg)
{
    return rb_Array(arg);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-BigDecimal" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              BigDecimal(value, exception: true) &rarr; bigdecimal
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              BigDecimal(value, ndigits, exception: true) &rarr; bigdecimal
            </span>
          </div>
        </div>

        <div class="method-description">
          <p>Returns the BigDecimal converted from <code>value</code> with a precision of <code>ndigits</code> decimal digits.</p>

<p>When <code>ndigits</code> is less than the number of significant digits in the value, the result is rounded to that number of digits, according to the current rounding mode; see <a href="BigDecimal.html#method-c-mode"><code>BigDecimal.mode</code></a>.</p>

<p>When <code>ndigits</code> is 0, the number of digits to correctly represent a float number is determined automatically.</p>

<p>Returns <code>value</code> converted to a BigDecimal, depending on the type of <code>value</code>:</p>
<ul><li>
<p><a href="Integer.html"><code>Integer</code></a>, <a href="Float.html"><code>Float</code></a>, <a href="Rational.html"><code>Rational</code></a>, <a href="Complex.html"><code>Complex</code></a>, or BigDecimal: converted directly:</p>

<pre class="ruby"><span class="ruby-comment"># Integer, Complex, or BigDecimal value does not require ndigits; ignored if given.</span>
<span class="ruby-constant">BigDecimal</span>(<span class="ruby-value">2</span>)                     <span class="ruby-comment"># =&gt; 0.2e1</span>
<span class="ruby-constant">BigDecimal</span>(<span class="ruby-constant">Complex</span>(<span class="ruby-value">2</span>, <span class="ruby-value">0</span>))         <span class="ruby-comment"># =&gt; 0.2e1</span>
<span class="ruby-constant">BigDecimal</span>(<span class="ruby-constant">BigDecimal</span>(<span class="ruby-value">2</span>))         <span class="ruby-comment"># =&gt; 0.2e1</span>
<span class="ruby-comment"># Float or Rational value requires ndigits.</span>
<span class="ruby-constant">BigDecimal</span>(<span class="ruby-value">2.0</span>, <span class="ruby-value">0</span>)                <span class="ruby-comment"># =&gt; 0.2e1</span>
<span class="ruby-constant">BigDecimal</span>(<span class="ruby-constant">Rational</span>(<span class="ruby-value">2</span>, <span class="ruby-value">1</span>), <span class="ruby-value">0</span>)     <span class="ruby-comment"># =&gt; 0.2e1</span>
</pre>
</li><li>
<p>String: converted by parsing if it contains an integer or floating-point literal; leading and trailing whitespace is ignored:</p>

<pre class="ruby"><span class="ruby-comment"># String does not require ndigits; ignored if given.</span>
<span class="ruby-constant">BigDecimal</span>(<span class="ruby-string">&#39;2&#39;</span>)     <span class="ruby-comment"># =&gt; 0.2e1</span>
<span class="ruby-constant">BigDecimal</span>(<span class="ruby-string">&#39;2.0&#39;</span>)   <span class="ruby-comment"># =&gt; 0.2e1</span>
<span class="ruby-constant">BigDecimal</span>(<span class="ruby-string">&#39;0.2e1&#39;</span>) <span class="ruby-comment"># =&gt; 0.2e1</span>
<span class="ruby-constant">BigDecimal</span>(<span class="ruby-string">&#39; 2.0 &#39;</span>) <span class="ruby-comment"># =&gt; 0.2e1</span>
</pre>
</li><li>
<p>Other type that responds to method <code>:to_str</code>: first converted to a string, then converted to a BigDecimal, as above.</p>
</li><li>
<p>Other type:</p>
<ul><li>
<p>Raises an exception if keyword argument <code>exception</code> is <code>true</code>.</p>
</li><li>
<p>Returns <code>nil</code> if keyword argument <code>exception</code> is <code>true</code>.</p>
</li></ul>
</li></ul>

<p>Raises an exception if <code>value</code> evaluates to a <a href="Float.html"><code>Float</code></a> and <code>digits</code> is larger than Float::DIG + 1.</p>

          <div class="method-source-code" id="BigDecimal-source">
            <pre>static VALUE
f_BigDecimal(int argc, VALUE *argv, VALUE self)
{
    VALUE val, digs_v, opts = Qnil;
    argc = rb_scan_args(argc, argv, &quot;11:&quot;, &amp;val, &amp;digs_v, &amp;opts);
    int exception = opts_exception_p(opts);

    size_t digs = SIZE_MAX; /* this means digs is omitted */
    if (argc &gt; 1) {
        digs_v = rb_to_int(digs_v);
        if (FIXNUM_P(digs_v)) {
            long n = FIX2LONG(digs_v);
            if (n &lt; 0)
                goto negative_digs;
            digs = (size_t)n;
        }
        else {
            if (RBIGNUM_NEGATIVE_P(digs_v)) {
              negative_digs:
                if (!exception)
                    return Qnil;
                rb_raise(rb_eArgError, &quot;negative precision&quot;);
            }
            digs = NUM2SIZET(digs_v);
        }
    }

    return rb_convert_to_BigDecimal(val, digs, exception);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-Complex" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              Complex(x[, y], exception: true)  &rarr;  numeric or nil
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Returns x+i*y;</p>

<pre class="ruby"><span class="ruby-constant">Complex</span>(<span class="ruby-value">1</span>, <span class="ruby-value">2</span>)    <span class="ruby-comment">#=&gt; (1+2i)</span>
<span class="ruby-constant">Complex</span>(<span class="ruby-string">&#39;1+2i&#39;</span>)  <span class="ruby-comment">#=&gt; (1+2i)</span>
<span class="ruby-constant">Complex</span>(<span class="ruby-keyword">nil</span>)     <span class="ruby-comment">#=&gt; TypeError</span>
<span class="ruby-constant">Complex</span>(<span class="ruby-value">1</span>, <span class="ruby-keyword">nil</span>)  <span class="ruby-comment">#=&gt; TypeError</span>

<span class="ruby-constant">Complex</span>(<span class="ruby-value">1</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-value">exception:</span> <span class="ruby-keyword">false</span>)  <span class="ruby-comment">#=&gt; nil</span>
<span class="ruby-constant">Complex</span>(<span class="ruby-string">&#39;1+2&#39;</span>, <span class="ruby-value">exception:</span> <span class="ruby-keyword">false</span>)   <span class="ruby-comment">#=&gt; nil</span>
</pre>

<p>Syntax of string form:</p>

<pre>string form = extra spaces , complex , extra spaces ;
complex = real part | [ sign ] , imaginary part
        | real part , sign , imaginary part
        | rational , &quot;@&quot; , rational ;
real part = rational ;
imaginary part = imaginary unit | unsigned rational , imaginary unit ;
rational = [ sign ] , unsigned rational ;
unsigned rational = numerator | numerator , &quot;/&quot; , denominator ;
numerator = integer part | fractional part | integer part , fractional part ;
denominator = digits ;
integer part = digits ;
fractional part = &quot;.&quot; , digits , [ ( &quot;e&quot; | &quot;E&quot; ) , [ sign ] , digits ] ;
imaginary unit = &quot;i&quot; | &quot;I&quot; | &quot;j&quot; | &quot;J&quot; ;
sign = &quot;-&quot; | &quot;+&quot; ;
digits = digit , { digit | &quot;_&quot; , digit };
digit = &quot;0&quot; | &quot;1&quot; | &quot;2&quot; | &quot;3&quot; | &quot;4&quot; | &quot;5&quot; | &quot;6&quot; | &quot;7&quot; | &quot;8&quot; | &quot;9&quot; ;
extra spaces = ? \s* ? ;</pre>

<p>See <a href="String.html#method-i-to_c"><code>String#to_c</code></a>.</p>

          <div class="method-source-code" id="Complex-source">
            <pre>static VALUE
nucomp_f_complex(int argc, VALUE *argv, VALUE klass)
{
    VALUE a1, a2, opts = Qnil;
    int raise = TRUE;

    if (rb_scan_args(argc, argv, &quot;11:&quot;, &amp;a1, &amp;a2, &amp;opts) == 1) {
        a2 = Qundef;
    }
    if (!NIL_P(opts)) {
        raise = rb_opts_exception_p(opts, raise);
    }
    if (argc &gt; 0 &amp;&amp; CLASS_OF(a1) == rb_cComplex &amp;&amp; UNDEF_P(a2)) {
        return a1;
    }
    return nucomp_convert(rb_cComplex, a1, a2, raise);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-Float" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              Float(arg, exception: true)    &rarr; float or nil
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Returns <em>arg</em> converted to a float. <a href="Numeric.html"><code>Numeric</code></a> types are converted directly, and with exception to <a href="String.html"><code>String</code></a> and <code>nil</code> the rest are converted using <em>arg</em><code>.to_f</code>.  Converting a <a href="String.html"><code>String</code></a> with invalid characters will result in a <a href="ArgumentError.html"><code>ArgumentError</code></a>.  Converting <code>nil</code> generates a <a href="TypeError.html"><code>TypeError</code></a>.  Exceptions can be suppressed by passing <code>exception: false</code>.</p>

<pre class="ruby"><span class="ruby-constant">Float</span>(<span class="ruby-value">1</span>)                 <span class="ruby-comment">#=&gt; 1.0</span>
<span class="ruby-constant">Float</span>(<span class="ruby-string">&quot;123.456&quot;</span>)         <span class="ruby-comment">#=&gt; 123.456</span>
<span class="ruby-constant">Float</span>(<span class="ruby-string">&quot;123.0_badstring&quot;</span>) <span class="ruby-comment">#=&gt; ArgumentError: invalid value for Float(): &quot;123.0_badstring&quot;</span>
<span class="ruby-constant">Float</span>(<span class="ruby-keyword">nil</span>)               <span class="ruby-comment">#=&gt; TypeError: can&#39;t convert nil into Float</span>
<span class="ruby-constant">Float</span>(<span class="ruby-string">&quot;123.0_badstring&quot;</span>, <span class="ruby-value">exception:</span> <span class="ruby-keyword">false</span>)  <span class="ruby-comment">#=&gt; nil</span>
</pre>

          <div class="method-source-code" id="Float-source">
            <pre><span class="ruby-comment"># File kernel.rb, line 171</span>
<span class="ruby-keyword">def</span> <span class="ruby-constant">Float</span>(<span class="ruby-identifier ruby-title">arg</span>, <span class="ruby-value">exception:</span> <span class="ruby-keyword">true</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-constant">Primitive</span>.<span class="ruby-identifier">mandatory_only?</span>
    <span class="ruby-constant">Primitive</span>.<span class="ruby-identifier">rb_f_float1</span>(<span class="ruby-identifier">arg</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">Primitive</span>.<span class="ruby-identifier">rb_f_float</span>(<span class="ruby-identifier">arg</span>, <span class="ruby-identifier">exception</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-Hash" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              Hash(object) &rarr; object or new_hash
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Returns a hash converted from <code>object</code>.</p>
<ul><li>
<p>If <code>object</code> is:</p>
<ul><li>
<p>A hash, returns <code>object</code>.</p>
</li><li>
<p>An empty array or <code>nil</code>, returns an empty hash.</p>
</li></ul>
</li><li>
<p>Otherwise, if <code>object.to_hash</code> returns a hash, returns that hash.</p>
</li><li>
<p>Otherwise, returns <a href="TypeError.html"><code>TypeError</code></a>.</p>
</li></ul>

<p>Examples:</p>

<pre class="ruby"><span class="ruby-constant">Hash</span>({<span class="ruby-value">foo:</span> <span class="ruby-value">0</span>, <span class="ruby-value">bar:</span> <span class="ruby-value">1</span>}) <span class="ruby-comment"># =&gt; {:foo=&gt;0, :bar=&gt;1}</span>
<span class="ruby-constant">Hash</span>(<span class="ruby-keyword">nil</span>)              <span class="ruby-comment"># =&gt; {}</span>
<span class="ruby-constant">Hash</span>([])               <span class="ruby-comment"># =&gt; {}</span>
</pre>

          <div class="method-source-code" id="Hash-source">
            <pre>static VALUE
rb_f_hash(VALUE obj, VALUE arg)
{
    return rb_Hash(arg);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-Integer" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              Integer(object, base = 0, exception: true) &rarr; integer or nil
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Returns an integer converted from <code>object</code>.</p>

<p>Tries to convert <code>object</code> to an integer using <code>to_int</code> first and <code>to_i</code> second; see below for exceptions.</p>

<p>With a non-zero <code>base</code>, <code>object</code> must be a string or convertible to a string.</p>

<h4 id="method-i-Integer-label-numeric+objects">numeric objects<span><a href="#method-i-Integer-label-numeric+objects">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>With integer argument <code>object</code> given, returns <code>object</code>:</p>

<pre class="ruby"><span class="ruby-constant">Integer</span>(<span class="ruby-value">1</span>)                <span class="ruby-comment"># =&gt; 1</span>
<span class="ruby-constant">Integer</span>(<span class="ruby-value">-1</span>)               <span class="ruby-comment"># =&gt; -1</span>
</pre>

<p>With floating-point argument <code>object</code> given, returns <code>object</code> truncated to an intger:</p>

<pre class="ruby"><span class="ruby-constant">Integer</span>(<span class="ruby-value">1.9</span>)              <span class="ruby-comment"># =&gt; 1  # Rounds toward zero.</span>
<span class="ruby-constant">Integer</span>(<span class="ruby-value">-1.9</span>)             <span class="ruby-comment"># =&gt; -1 # Rounds toward zero.</span>
</pre>

<h4 id="method-i-Integer-label-string+objects">string objects<span><a href="#method-i-Integer-label-string+objects">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>With string argument <code>object</code> and zero <code>base</code> given, returns <code>object</code> converted to an integer in base 10:</p>

<pre class="ruby"><span class="ruby-constant">Integer</span>(<span class="ruby-string">&#39;100&#39;</span>)    <span class="ruby-comment"># =&gt; 100</span>
<span class="ruby-constant">Integer</span>(<span class="ruby-string">&#39;-100&#39;</span>)   <span class="ruby-comment"># =&gt; -100</span>
</pre>

<p>With <code>base</code> zero, string <code>object</code> may contain leading characters to specify the actual base (radix indicator):</p>

<pre class="ruby"><span class="ruby-constant">Integer</span>(<span class="ruby-string">&#39;0100&#39;</span>)  <span class="ruby-comment"># =&gt; 64  # Leading &#39;0&#39; specifies base 8.</span>
<span class="ruby-constant">Integer</span>(<span class="ruby-string">&#39;0b100&#39;</span>) <span class="ruby-comment"># =&gt; 4   # Leading &#39;0b&#39;, specifies base 2.</span>
<span class="ruby-constant">Integer</span>(<span class="ruby-string">&#39;0x100&#39;</span>) <span class="ruby-comment"># =&gt; 256 # Leading &#39;0x&#39; specifies base 16.</span>
</pre>

<p>With a positive <code>base</code> (in range 2..36) given, returns <code>object</code> converted to an integer in the given base:</p>

<pre class="ruby"><span class="ruby-constant">Integer</span>(<span class="ruby-string">&#39;100&#39;</span>, <span class="ruby-value">2</span>)   <span class="ruby-comment"># =&gt; 4</span>
<span class="ruby-constant">Integer</span>(<span class="ruby-string">&#39;100&#39;</span>, <span class="ruby-value">8</span>)   <span class="ruby-comment"># =&gt; 64</span>
<span class="ruby-constant">Integer</span>(<span class="ruby-string">&#39;-100&#39;</span>, <span class="ruby-value">16</span>) <span class="ruby-comment"># =&gt; -256</span>
</pre>

<p>With a negative <code>base</code> (in range -36..-2) given, returns <code>object</code> converted to an integer in the radix indicator if exists or <code>-base</code>:</p>

<pre class="ruby"><span class="ruby-constant">Integer</span>(<span class="ruby-string">&#39;0x100&#39;</span>, <span class="ruby-value">-2</span>)   <span class="ruby-comment"># =&gt; 256</span>
<span class="ruby-constant">Integer</span>(<span class="ruby-string">&#39;100&#39;</span>, <span class="ruby-value">-2</span>)     <span class="ruby-comment"># =&gt; 4</span>
<span class="ruby-constant">Integer</span>(<span class="ruby-string">&#39;0b100&#39;</span>, <span class="ruby-value">-8</span>)   <span class="ruby-comment"># =&gt; 4</span>
<span class="ruby-constant">Integer</span>(<span class="ruby-string">&#39;100&#39;</span>, <span class="ruby-value">-8</span>)     <span class="ruby-comment"># =&gt; 64</span>
<span class="ruby-constant">Integer</span>(<span class="ruby-string">&#39;0o100&#39;</span>, <span class="ruby-value">-10</span>)  <span class="ruby-comment"># =&gt; 64</span>
<span class="ruby-constant">Integer</span>(<span class="ruby-string">&#39;100&#39;</span>, <span class="ruby-value">-10</span>)    <span class="ruby-comment"># =&gt; 100</span>
</pre>

<p><code>base</code> -1 is equal the -10 case.</p>

<p>When converting strings, surrounding whitespace and embedded underscores are allowed and ignored:</p>

<pre class="ruby"><span class="ruby-constant">Integer</span>(<span class="ruby-string">&#39; 100 &#39;</span>)      <span class="ruby-comment"># =&gt; 100</span>
<span class="ruby-constant">Integer</span>(<span class="ruby-string">&#39;-1_0_0&#39;</span>, <span class="ruby-value">16</span>) <span class="ruby-comment"># =&gt; -256</span>
</pre>

<h4 id="method-i-Integer-label-other+classes">other classes<span><a href="#method-i-Integer-label-other+classes">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>Examples with <code>object</code> of various other classes:</p>

<pre class="ruby"><span class="ruby-constant">Integer</span>(<span class="ruby-constant">Rational</span>(<span class="ruby-value">9</span>, <span class="ruby-value">10</span>)) <span class="ruby-comment"># =&gt; 0  # Rounds toward zero.</span>
<span class="ruby-constant">Integer</span>(<span class="ruby-constant">Complex</span>(<span class="ruby-value">2</span>, <span class="ruby-value">0</span>))   <span class="ruby-comment"># =&gt; 2  # Imaginary part must be zero.</span>
<span class="ruby-constant">Integer</span>(<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>)        <span class="ruby-comment"># =&gt; 1650974042</span>
</pre>

<h4 id="method-i-Integer-label-keywords">keywords<span><a href="#method-i-Integer-label-keywords">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>With optional keyword argument <code>exception</code> given as <code>true</code> (the default):</p>
<ul><li>
<p>Raises <a href="TypeError.html"><code>TypeError</code></a> if <code>object</code> does not respond to <code>to_int</code> or <code>to_i</code>.</p>
</li><li>
<p>Raises <a href="TypeError.html"><code>TypeError</code></a> if <code>object</code> is <code>nil</code>.</p>
</li><li>
<p>Raise <a href="ArgumentError.html"><code>ArgumentError</code></a> if <code>object</code> is an invalid string.</p>
</li></ul>

<p>With <code>exception</code> given as <code>false</code>, an exception of any kind is suppressed and <code>nil</code> is returned.</p>

          <div class="method-source-code" id="Integer-source">
            <pre>static VALUE
rb_f_integer(int argc, VALUE *argv, VALUE obj)
{
    VALUE arg = Qnil, opts = Qnil;
    int base = 0;

    if (argc &gt; 1) {
        int narg = 1;
        VALUE vbase = rb_check_to_int(argv[1]);
        if (!NIL_P(vbase)) {
            base = NUM2INT(vbase);
            narg = 2;
        }
        if (argc &gt; narg) {
            VALUE hash = rb_check_hash_type(argv[argc-1]);
            if (!NIL_P(hash)) {
                opts = rb_extract_keywords(&amp;hash);
                if (!hash) --argc;
            }
        }
    }
    rb_check_arity(argc, 1, 2);
    arg = argv[0];

    return rb_convert_to_integer(arg, base, opts_exception_p(opts));
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-Pathname" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              Pathname(path)  &rarr; pathname
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Creates a new <a href="Pathname.html"><code>Pathname</code></a> object from the given string, <code>path</code>, and returns pathname object.</p>

<p>In order to use this constructor, you must first require the <a href="Pathname.html"><code>Pathname</code></a> standard library extension.</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;pathname&#39;</span>
<span class="ruby-constant">Pathname</span>(<span class="ruby-string">&quot;/home/zzak&quot;</span>)
<span class="ruby-comment">#=&gt; #&lt;Pathname:/home/zzak&gt;</span>
</pre>

<p>See also <a href="Pathname.html#method-c-new"><code>Pathname::new</code></a> for more information.</p>

          <div class="method-source-code" id="Pathname-source">
            <pre>static VALUE
path_f_pathname(VALUE self, VALUE str)
{
    if (CLASS_OF(str) == rb_cPathname)
        return str;
    return rb_class_new_instance(1, &amp;str, rb_cPathname);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-Rational" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              Rational(x, y, exception: true)  &rarr;  rational or nil
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              Rational(arg, exception: true)   &rarr;  rational or nil
            </span>
          </div>
        </div>

        <div class="method-description">
          <p>Returns <code>x/y</code> or <code>arg</code> as a <a href="Rational.html"><code>Rational</code></a>.</p>

<pre class="ruby"><span class="ruby-constant">Rational</span>(<span class="ruby-value">2</span>, <span class="ruby-value">3</span>)   <span class="ruby-comment">#=&gt; (2/3)</span>
<span class="ruby-constant">Rational</span>(<span class="ruby-value">5</span>)      <span class="ruby-comment">#=&gt; (5/1)</span>
<span class="ruby-constant">Rational</span>(<span class="ruby-value">0.5</span>)    <span class="ruby-comment">#=&gt; (1/2)</span>
<span class="ruby-constant">Rational</span>(<span class="ruby-value">0.3</span>)    <span class="ruby-comment">#=&gt; (5404319552844595/18014398509481984)</span>

<span class="ruby-constant">Rational</span>(<span class="ruby-string">&quot;2/3&quot;</span>)  <span class="ruby-comment">#=&gt; (2/3)</span>
<span class="ruby-constant">Rational</span>(<span class="ruby-string">&quot;0.3&quot;</span>)  <span class="ruby-comment">#=&gt; (3/10)</span>

<span class="ruby-constant">Rational</span>(<span class="ruby-string">&quot;10 cents&quot;</span>)  <span class="ruby-comment">#=&gt; ArgumentError</span>
<span class="ruby-constant">Rational</span>(<span class="ruby-keyword">nil</span>)         <span class="ruby-comment">#=&gt; TypeError</span>
<span class="ruby-constant">Rational</span>(<span class="ruby-value">1</span>, <span class="ruby-keyword">nil</span>)      <span class="ruby-comment">#=&gt; TypeError</span>

<span class="ruby-constant">Rational</span>(<span class="ruby-string">&quot;10 cents&quot;</span>, <span class="ruby-value">exception:</span> <span class="ruby-keyword">false</span>)  <span class="ruby-comment">#=&gt; nil</span>
</pre>

<p>Syntax of the string form:</p>

<pre>string form = extra spaces , rational , extra spaces ;
rational = [ sign ] , unsigned rational ;
unsigned rational = numerator | numerator , &quot;/&quot; , denominator ;
numerator = integer part | fractional part | integer part , fractional part ;
denominator = digits ;
integer part = digits ;
fractional part = &quot;.&quot; , digits , [ ( &quot;e&quot; | &quot;E&quot; ) , [ sign ] , digits ] ;
sign = &quot;-&quot; | &quot;+&quot; ;
digits = digit , { digit | &quot;_&quot; , digit } ;
digit = &quot;0&quot; | &quot;1&quot; | &quot;2&quot; | &quot;3&quot; | &quot;4&quot; | &quot;5&quot; | &quot;6&quot; | &quot;7&quot; | &quot;8&quot; | &quot;9&quot; ;
extra spaces = ? \s* ? ;</pre>

<p>See also <a href="String.html#method-i-to_r"><code>String#to_r</code></a>.</p>

          <div class="method-source-code" id="Rational-source">
            <pre>static VALUE
nurat_f_rational(int argc, VALUE *argv, VALUE klass)
{
    VALUE a1, a2, opts = Qnil;
    int raise = TRUE;

    if (rb_scan_args(argc, argv, &quot;11:&quot;, &amp;a1, &amp;a2, &amp;opts) == 1) {
        a2 = Qundef;
    }
    if (!NIL_P(opts)) {
        raise = rb_opts_exception_p(opts, raise);
    }
    return nurat_convert(rb_cRational, a1, a2, raise);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-String" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              String(object) &rarr; object or new_string
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Returns a string converted from <code>object</code>.</p>

<p>Tries to convert <code>object</code> to a string using <code>to_str</code> first and <code>to_s</code> second:</p>

<pre class="ruby"><span class="ruby-constant">String</span>([<span class="ruby-value">0</span>, <span class="ruby-value">1</span>, <span class="ruby-value">2</span>])        <span class="ruby-comment"># =&gt; &quot;[0, 1, 2]&quot;</span>
<span class="ruby-constant">String</span>(<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">5</span>)             <span class="ruby-comment"># =&gt; &quot;0..5&quot;</span>
<span class="ruby-constant">String</span>({<span class="ruby-value">foo:</span> <span class="ruby-value">0</span>, <span class="ruby-value">bar:</span> <span class="ruby-value">1</span>}) <span class="ruby-comment"># =&gt; &quot;{:foo=&gt;0, :bar=&gt;1}&quot;</span>
</pre>

<p>Raises <code>TypeError</code> if <code>object</code> cannot be converted to a string.</p>

          <div class="method-source-code" id="String-source">
            <pre>static VALUE
rb_f_string(VALUE obj, VALUE arg)
{
    return rb_String(arg);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-__callee__" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              __callee__         &rarr; symbol
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Returns the called name of the current method as a <a href="Symbol.html"><code>Symbol</code></a>. If called outside of a method, it returns <code>nil</code>.</p>

          <div class="method-source-code" id="__callee__-source">
            <pre>static VALUE
rb_f_callee_name(VALUE _)
{
    ID fname = prev_frame_callee(); /* need *callee* ID */

    if (fname) {
        return ID2SYM(fname);
    }
    else {
        return Qnil;
    }
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-__dir__" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              __dir__         &rarr; string
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Returns the canonicalized absolute path of the directory of the file from which this method is called. It means symlinks in the path is resolved. If <code>__FILE__</code> is <code>nil</code>, it returns <code>nil</code>. The return value equals to <code>File.dirname(File.realpath(__FILE__))</code>.</p>

          <div class="method-source-code" id="__dir__-source">
            <pre>static VALUE
f_current_dirname(VALUE _)
{
    VALUE base = rb_current_realfilepath();
    if (NIL_P(base)) {
        return Qnil;
    }
    base = rb_file_dirname(base);
    return base;
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-__method__" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              __method__         &rarr; symbol
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Returns the name at the definition of the current method as a <a href="Symbol.html"><code>Symbol</code></a>. If called outside of a method, it returns <code>nil</code>.</p>

          <div class="method-source-code" id="__method__-source">
            <pre>static VALUE
rb_f_method_name(VALUE _)
{
    ID fname = prev_frame_func(); /* need *method* ID */

    if (fname) {
        return ID2SYM(fname);
    }
    else {
        return Qnil;
    }
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-60" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              `command` &rarr; string
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Returns the <code>$stdout</code> output from running <code>command</code> in a subshell; sets global variable <code>$?</code> to the process status.</p>

<p>This method has potential security vulnerabilities if called with untrusted input; see <a href="command_injection_rdoc.html">Command Injection</a>.</p>

<p>Examples:</p>

<pre>$ `date`                 # =&gt; &quot;Wed Apr  9 08:56:30 CDT 2003\n&quot;
$ `echo oops &amp;&amp; exit 99` # =&gt; &quot;oops\n&quot;
$ $?                     # =&gt; #&lt;Process::Status: pid 17088 exit 99&gt;
$ $?.status              # =&gt; 99&gt;</pre>

<p>The built-in syntax <code>%x{...}</code> uses this method.</p>

          <div class="method-source-code" id="60-source">
            <pre>static VALUE
rb_f_backquote(VALUE obj, VALUE str)
{
    VALUE port;
    VALUE result;
    rb_io_t *fptr;

    SafeStringValue(str);
    rb_last_status_clear();
    port = pipe_open_s(str, &quot;r&quot;, FMODE_READABLE|DEFAULT_TEXTMODE, NULL);
    if (NIL_P(port)) return rb_str_new(0,0);

    GetOpenFile(port, fptr);
    result = read_all(fptr, remain_size(fptr), Qnil);
    rb_io_close(port);
    RFILE(port)-&gt;fptr = NULL;
    rb_io_fptr_finalize(fptr);
    RB_GC_GUARD(port);

    return result;
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-abort" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              abort
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              Kernel::abort([msg])
            </span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              abort([msg])
            </span>
          </div>
        </div>

        <div class="method-description">
          <p>Terminate execution immediately, effectively by calling <code>Kernel.exit(false)</code>. If <em>msg</em> is given, it is written to STDERR prior to terminating.</p>

          <div class="method-source-code" id="abort-source">
            <pre>static VALUE
f_abort(int c, const VALUE *a, VALUE _)
{
    rb_f_abort(c, a);
    UNREACHABLE_RETURN(Qnil);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-at_exit" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              at_exit { block } &rarr; proc
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Converts <em>block</em> to a <code>Proc</code> object (and therefore binds it at the point of call) and registers it for execution when the program exits. If multiple handlers are registered, they are executed in reverse order of registration.</p>

<pre class="ruby"><span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">do_at_exit</span>(<span class="ruby-identifier">str1</span>)
  <span class="ruby-identifier">at_exit</span> { <span class="ruby-identifier">print</span> <span class="ruby-identifier">str1</span> }
<span class="ruby-keyword">end</span>
<span class="ruby-identifier">at_exit</span> { <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;cruel world&quot;</span> }
<span class="ruby-identifier">do_at_exit</span>(<span class="ruby-string">&quot;goodbye &quot;</span>)
<span class="ruby-identifier">exit</span>
</pre>

<p><em>produces:</em></p>

<pre class="ruby"><span class="ruby-identifier">goodbye</span> <span class="ruby-identifier">cruel</span> <span class="ruby-identifier">world</span>
</pre>

          <div class="method-source-code" id="at_exit-source">
            <pre>static VALUE
rb_f_at_exit(VALUE _)
{
    VALUE proc;

    if (!rb_block_given_p()) {
        rb_raise(rb_eArgError, &quot;called without a block&quot;);
    }
    proc = rb_block_proc();
    rb_set_end_proc(rb_call_end_proc, proc);
    return proc;
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-autoload" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              autoload(const, filename)   &rarr; nil
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <pre>Registers _filename_ to be loaded (using Kernel::require)
the first time that _const_ (which may be a String or
a symbol) is accessed.

   autoload(:MyModule, &quot;/usr/local/lib/modules/my_module.rb&quot;)</pre>

<p>If <em>const</em> is defined as autoload, the file name to be loaded is replaced with <em>filename</em>.  If <em>const</em> is defined but not as autoload, does nothing.</p>

          <div class="method-source-code" id="autoload-source">
            <pre>static VALUE
rb_f_autoload(VALUE obj, VALUE sym, VALUE file)
{
    VALUE klass = rb_class_real(rb_vm_cbase());
    if (!klass) {
        rb_raise(rb_eTypeError, &quot;Can not set autoload on singleton class&quot;);
    }
    return rb_mod_autoload(klass, sym, file);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-autoload-3F" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              autoload?(name, inherit=true)   &rarr; String or nil
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Returns <em>filename</em> to be loaded if <em>name</em> is registered as <code>autoload</code>.</p>

<pre class="ruby"><span class="ruby-identifier">autoload</span>(<span class="ruby-value">:B</span>, <span class="ruby-string">&quot;b&quot;</span>)
<span class="ruby-identifier">autoload?</span>(<span class="ruby-value">:B</span>)            <span class="ruby-comment">#=&gt; &quot;b&quot;</span>
</pre>

          <div class="method-source-code" id="autoload-3F-source">
            <pre>static VALUE
rb_f_autoload_p(int argc, VALUE *argv, VALUE obj)
{
    /* use rb_vm_cbase() as same as rb_f_autoload. */
    VALUE klass = rb_vm_cbase();
    if (NIL_P(klass)) {
        return Qnil;
    }
    return rb_mod_autoload_p(argc, argv, klass);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-binding" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              binding &rarr; a_binding
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Returns a <code>Binding</code> object, describing the variable and method bindings at the point of call. This object can be used when calling <code>eval</code> to execute the evaluated command in this environment. See also the description of class <code>Binding</code>.</p>

<pre class="ruby"><span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">get_binding</span>(<span class="ruby-identifier">param</span>)
  <span class="ruby-identifier">binding</span>
<span class="ruby-keyword">end</span>
<span class="ruby-identifier">b</span> = <span class="ruby-identifier">get_binding</span>(<span class="ruby-string">&quot;hello&quot;</span>)
<span class="ruby-identifier">eval</span>(<span class="ruby-string">&quot;param&quot;</span>, <span class="ruby-identifier">b</span>)   <span class="ruby-comment">#=&gt; &quot;hello&quot;</span>
</pre>

          <div class="method-source-code" id="binding-source">
            <pre>static VALUE
rb_f_binding(VALUE self)
{
    return rb_binding_new();
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-block_given-3F" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              block_given?   &rarr; true or false
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Returns <code>true</code> if <code>yield</code> would execute a block in the current context. The <code>iterator?</code> form is mildly deprecated.</p>

<pre class="ruby"><span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">try</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
    <span class="ruby-keyword">yield</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-string">&quot;no block&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
<span class="ruby-identifier">try</span>                  <span class="ruby-comment">#=&gt; &quot;no block&quot;</span>
<span class="ruby-identifier">try</span> { <span class="ruby-string">&quot;hello&quot;</span> }      <span class="ruby-comment">#=&gt; &quot;hello&quot;</span>
<span class="ruby-identifier">try</span> <span class="ruby-keyword">do</span> <span class="ruby-string">&quot;hello&quot;</span> <span class="ruby-keyword">end</span>   <span class="ruby-comment">#=&gt; &quot;hello&quot;</span>
</pre>

          <div class="method-source-code" id="block_given-3F-source">
            <pre>static VALUE
rb_f_block_given_p(VALUE _)
{
    rb_execution_context_t *ec = GET_EC();
    rb_control_frame_t *cfp = ec-&gt;cfp;
    cfp = vm_get_ruby_level_caller_cfp(ec, RUBY_VM_PREVIOUS_CONTROL_FRAME(cfp));

    return RBOOL(cfp != NULL &amp;&amp; VM_CF_BLOCK_HANDLER(cfp) != VM_BLOCK_HANDLER_NONE);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-callcc" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              callcc {|cont| block }   &rarr;  obj
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Generates a <a href="Continuation.html"><code>Continuation</code></a> object, which it passes to the associated block. You need to <code>require &#39;continuation&#39;</code> before using this method. Performing a <em>cont</em><code>.call</code> will cause the <a href="Kernel.html#method-i-callcc"><code>callcc</code></a> to return (as will falling through the end of the block). The value returned by the <a href="Kernel.html#method-i-callcc"><code>callcc</code></a> is the value of the block, or the value passed to <em>cont</em><code>.call</code>. See class <a href="Continuation.html"><code>Continuation</code></a> for more details. Also see <a href="Kernel.html#method-i-throw"><code>Kernel#throw</code></a> for an alternative mechanism for unwinding a call stack.</p>

          <div class="method-source-code" id="callcc-source">
            <pre>static VALUE
rb_callcc(VALUE self)
{
    volatile int called;
    volatile VALUE val = cont_capture(&amp;called);

    if (called) {
        return val;
    }
    else {
        return rb_yield(val);
    }
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-caller" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              caller(start=1, length=nil)  &rarr; array or nil
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              caller(range)                &rarr; array or nil
            </span>
          </div>
        </div>

        <div class="method-description">
          <p>Returns the current execution stack—an array containing strings in the form <code>file:line</code> or <code>file:line: in `method&#39;</code>.</p>

<p>The optional <em>start</em> parameter determines the number of initial stack entries to omit from the top of the stack.</p>

<p>A second optional <code>length</code> parameter can be used to limit how many entries are returned from the stack.</p>

<p>Returns <code>nil</code> if <em>start</em> is greater than the size of current execution stack.</p>

<p>Optionally you can pass a range, which will return an array containing the entries within the specified range.</p>

<pre class="ruby"><span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">a</span>(<span class="ruby-identifier">skip</span>)
  <span class="ruby-identifier">caller</span>(<span class="ruby-identifier">skip</span>)
<span class="ruby-keyword">end</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">b</span>(<span class="ruby-identifier">skip</span>)
  <span class="ruby-identifier">a</span>(<span class="ruby-identifier">skip</span>)
<span class="ruby-keyword">end</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">c</span>(<span class="ruby-identifier">skip</span>)
  <span class="ruby-identifier">b</span>(<span class="ruby-identifier">skip</span>)
<span class="ruby-keyword">end</span>
<span class="ruby-identifier">c</span>(<span class="ruby-value">0</span>)   <span class="ruby-comment">#=&gt; [&quot;prog:2:in `a&#39;&quot;, &quot;prog:5:in `b&#39;&quot;, &quot;prog:8:in `c&#39;&quot;, &quot;prog:10:in `&lt;main&gt;&#39;&quot;]</span>
<span class="ruby-identifier">c</span>(<span class="ruby-value">1</span>)   <span class="ruby-comment">#=&gt; [&quot;prog:5:in `b&#39;&quot;, &quot;prog:8:in `c&#39;&quot;, &quot;prog:11:in `&lt;main&gt;&#39;&quot;]</span>
<span class="ruby-identifier">c</span>(<span class="ruby-value">2</span>)   <span class="ruby-comment">#=&gt; [&quot;prog:8:in `c&#39;&quot;, &quot;prog:12:in `&lt;main&gt;&#39;&quot;]</span>
<span class="ruby-identifier">c</span>(<span class="ruby-value">3</span>)   <span class="ruby-comment">#=&gt; [&quot;prog:13:in `&lt;main&gt;&#39;&quot;]</span>
<span class="ruby-identifier">c</span>(<span class="ruby-value">4</span>)   <span class="ruby-comment">#=&gt; []</span>
<span class="ruby-identifier">c</span>(<span class="ruby-value">5</span>)   <span class="ruby-comment">#=&gt; nil</span>
</pre>

          <div class="method-source-code" id="caller-source">
            <pre>static VALUE
rb_f_caller(int argc, VALUE *argv, VALUE _)
{
    return ec_backtrace_to_ary(GET_EC(), argc, argv, 1, 1, 1);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-caller_locations" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              caller_locations(start=1, length=nil)    &rarr; array or nil
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              caller_locations(range)                  &rarr; array or nil
            </span>
          </div>
        </div>

        <div class="method-description">
          <p>Returns the current execution stack—an array containing backtrace location objects.</p>

<p>See <a href="Thread/Backtrace/Location.html"><code>Thread::Backtrace::Location</code></a> for more information.</p>

<p>The optional <em>start</em> parameter determines the number of initial stack entries to omit from the top of the stack.</p>

<p>A second optional <code>length</code> parameter can be used to limit how many entries are returned from the stack.</p>

<p>Returns <code>nil</code> if <em>start</em> is greater than the size of current execution stack.</p>

<p>Optionally you can pass a range, which will return an array containing the entries within the specified range.</p>

          <div class="method-source-code" id="caller_locations-source">
            <pre>static VALUE
rb_f_caller_locations(int argc, VALUE *argv, VALUE _)
{
    return ec_backtrace_to_ary(GET_EC(), argc, argv, 1, 1, 0);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-catch" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              catch([tag]) {|tag| block }  &rarr; obj
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p><code>catch</code> executes its block. If <code>throw</code> is not called, the block executes normally, and <code>catch</code> returns the value of the last expression evaluated.</p>

<pre class="ruby"><span class="ruby-identifier">catch</span>(<span class="ruby-value">1</span>) { <span class="ruby-value">123</span> }            <span class="ruby-comment"># =&gt; 123</span>
</pre>

<p>If <code>throw(tag2, val)</code> is called, Ruby searches up its stack for a <code>catch</code> block whose <code>tag</code> has the same <code>object_id</code> as <em>tag2</em>. When found, the block stops executing and returns <em>val</em> (or <code>nil</code> if no second argument was given to <code>throw</code>).</p>

<pre class="ruby"><span class="ruby-identifier">catch</span>(<span class="ruby-value">1</span>) { <span class="ruby-identifier">throw</span>(<span class="ruby-value">1</span>, <span class="ruby-value">456</span>) }  <span class="ruby-comment"># =&gt; 456</span>
<span class="ruby-identifier">catch</span>(<span class="ruby-value">1</span>) { <span class="ruby-identifier">throw</span>(<span class="ruby-value">1</span>) }       <span class="ruby-comment"># =&gt; nil</span>
</pre>

<p>When <code>tag</code> is passed as the first argument, <code>catch</code> yields it as the parameter of the block.</p>

<pre class="ruby"><span class="ruby-identifier">catch</span>(<span class="ruby-value">1</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span> <span class="ruby-operator">+</span> <span class="ruby-value">2</span> }       <span class="ruby-comment"># =&gt; 3</span>
</pre>

<p>When no <code>tag</code> is given, <code>catch</code> yields a new unique object (as from <code>Object.new</code>) as the block parameter. This object can then be used as the argument to <code>throw</code>, and will match the correct <code>catch</code> block.</p>

<pre class="ruby"><span class="ruby-identifier">catch</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">obj_A</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">catch</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">obj_B</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">throw</span>(<span class="ruby-identifier">obj_B</span>, <span class="ruby-value">123</span>)
    <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;This puts is not reached&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;This puts is displayed&quot;</span>
  <span class="ruby-value">456</span>
<span class="ruby-keyword">end</span>

<span class="ruby-comment"># =&gt; 456</span>

<span class="ruby-identifier">catch</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">obj_A</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">catch</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">obj_B</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">throw</span>(<span class="ruby-identifier">obj_A</span>, <span class="ruby-value">123</span>)
    <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;This puts is still not reached&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;Now this puts is also not reached&quot;</span>
  <span class="ruby-value">456</span>
<span class="ruby-keyword">end</span>

<span class="ruby-comment"># =&gt; 123</span>
</pre>

          <div class="method-source-code" id="catch-source">
            <pre>static VALUE
rb_f_catch(int argc, VALUE *argv, VALUE self)
{
    VALUE tag = rb_check_arity(argc, 0, 1) ? argv[0] : rb_obj_alloc(rb_cObject);
    return rb_catch_obj(tag, catch_i, 0);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-chomp" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              chomp            &rarr; $_
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              chomp(string)    &rarr; $_
            </span>
          </div>
        </div>

        <div class="method-description">
          <p>Equivalent to <code>$_ = $_.chomp(<em>string</em>)</code>. See <a href="String.html#method-i-chomp"><code>String#chomp</code></a>. Available only when -p/-n command line option specified.</p>

          <div class="method-source-code" id="chomp-source">
            <pre>static VALUE
rb_f_chomp(int argc, VALUE *argv, VALUE _)
{
    VALUE str = rb_funcall_passing_block(uscore_get(), rb_intern(&quot;chomp&quot;), argc, argv);
    rb_lastline_set(str);
    return str;
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-chop" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              chop   &rarr; $_
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Equivalent to <code>($_.dup).chop!</code>, except <code>nil</code> is never returned. See <a href="String.html#method-i-chop-21"><code>String#chop!</code></a>. Available only when -p/-n command line option specified.</p>

          <div class="method-source-code" id="chop-source">
            <pre>static VALUE
rb_f_chop(VALUE _)
{
    VALUE str = rb_funcall_passing_block(uscore_get(), rb_intern(&quot;chop&quot;), 0, 0);
    rb_lastline_set(str);
    return str;
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-class" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              class    &rarr; class
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Returns the class of <em>obj</em>. This method must always be called with an explicit receiver, as <a href="Kernel.html#method-i-class"><code>class</code></a> is also a reserved word in Ruby.</p>

<pre class="ruby"><span class="ruby-value">1</span>.<span class="ruby-identifier">class</span>      <span class="ruby-comment">#=&gt; Integer</span>
<span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>   <span class="ruby-comment">#=&gt; Object</span>
</pre>

          <div class="method-source-code" id="class-source">
            <pre><span class="ruby-comment"># File kernel.rb, line 18</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">class</span>
  <span class="ruby-constant">Primitive</span>.<span class="ruby-identifier ruby-title">attr!</span> <span class="ruby-string">&#39;inline&#39;</span>
  <span class="ruby-constant">Primitive</span>.<span class="ruby-identifier">cexpr!</span> <span class="ruby-string">&#39;rb_obj_class(self)&#39;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-clone" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              clone(freeze: nil) &rarr; an_object
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Produces a shallow copy of <em>obj</em>—the instance variables of <em>obj</em> are copied, but not the objects they reference. <a href="Kernel.html#method-i-clone"><code>clone</code></a> copies the frozen value state of <em>obj</em>, unless the <code>:freeze</code> keyword argument is given with a false or true value. See also the discussion under <a href="Object.html#method-i-dup"><code>Object#dup</code></a>.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Klass</span>
   <span class="ruby-identifier">attr_accessor</span> <span class="ruby-value">:str</span>
<span class="ruby-keyword">end</span>
<span class="ruby-identifier">s1</span> = <span class="ruby-constant">Klass</span>.<span class="ruby-identifier">new</span>      <span class="ruby-comment">#=&gt; #&lt;Klass:0x401b3a38&gt;</span>
<span class="ruby-identifier">s1</span>.<span class="ruby-identifier">str</span> = <span class="ruby-string">&quot;Hello&quot;</span>    <span class="ruby-comment">#=&gt; &quot;Hello&quot;</span>
<span class="ruby-identifier">s2</span> = <span class="ruby-identifier">s1</span>.<span class="ruby-identifier">clone</span>       <span class="ruby-comment">#=&gt; #&lt;Klass:0x401b3998 @str=&quot;Hello&quot;&gt;</span>
<span class="ruby-identifier">s2</span>.<span class="ruby-identifier">str</span>[<span class="ruby-value">1</span>,<span class="ruby-value">4</span>] = <span class="ruby-string">&quot;i&quot;</span>   <span class="ruby-comment">#=&gt; &quot;i&quot;</span>
<span class="ruby-identifier">s1</span>.<span class="ruby-identifier">inspect</span>          <span class="ruby-comment">#=&gt; &quot;#&lt;Klass:0x401b3a38 @str=\&quot;Hi\&quot;&gt;&quot;</span>
<span class="ruby-identifier">s2</span>.<span class="ruby-identifier">inspect</span>          <span class="ruby-comment">#=&gt; &quot;#&lt;Klass:0x401b3998 @str=\&quot;Hi\&quot;&gt;&quot;</span>
</pre>

<p>This method may have class-specific behavior.  If so, that behavior will be documented under the #<code>initialize_copy</code> method of the class.</p>

          <div class="method-source-code" id="clone-source">
            <pre><span class="ruby-comment"># File kernel.rb, line 47</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">clone</span>(<span class="ruby-value">freeze:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-constant">Primitive</span>.<span class="ruby-identifier">rb_obj_clone2</span>(<span class="ruby-identifier">freeze</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-eval" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              eval(string [, binding [, filename [,lineno]]])  &rarr; obj
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Evaluates the Ruby expression(s) in <em>string</em>. If <em>binding</em> is given, which must be a <a href="Binding.html"><code>Binding</code></a> object, the evaluation is performed in its context. If the optional <em>filename</em> and <em>lineno</em> parameters are present, they will be used when reporting syntax errors.</p>

<pre class="ruby"><span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">get_binding</span>(<span class="ruby-identifier">str</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">binding</span>
<span class="ruby-keyword">end</span>
<span class="ruby-identifier">str</span> = <span class="ruby-string">&quot;hello&quot;</span>
<span class="ruby-identifier">eval</span> <span class="ruby-string">&quot;str + &#39; Fred&#39;&quot;</span>                      <span class="ruby-comment">#=&gt; &quot;hello Fred&quot;</span>
<span class="ruby-identifier">eval</span> <span class="ruby-string">&quot;str + &#39; Fred&#39;&quot;</span>, <span class="ruby-identifier">get_binding</span>(<span class="ruby-string">&quot;bye&quot;</span>)  <span class="ruby-comment">#=&gt; &quot;bye Fred&quot;</span>
</pre>

          <div class="method-source-code" id="eval-source">
            <pre>VALUE
rb_f_eval(int argc, const VALUE *argv, VALUE self)
{
    VALUE src, scope, vfile, vline;
    VALUE file = Qundef;
    int line = 1;

    rb_scan_args(argc, argv, &quot;13&quot;, &amp;src, &amp;scope, &amp;vfile, &amp;vline);
    SafeStringValue(src);
    if (argc &gt;= 3) {
        StringValue(vfile);
    }
    if (argc &gt;= 4) {
        line = NUM2INT(vline);
    }

    if (!NIL_P(vfile))
        file = vfile;

    if (NIL_P(scope))
        return eval_string_with_cref(self, src, NULL, file, line);
    else
        return eval_string_with_scope(scope, src, file, line);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-exec" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              exec([env,] command... [,options])
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Replaces the current process by running the given external <em>command</em>, which can take one of the following forms:</p>
<dl class="rdoc-list label-list"><dt><code>exec(commandline)</code>
<dd>
<p>command line string which is passed to the standard shell</p>
</dd><dt><code>exec(cmdname, arg1, ...)</code>
<dd>
<p>command name and one or more arguments (no shell)</p>
</dd><dt><code>exec([cmdname, argv0], arg1, ...)</code>
<dd>
<p>command name, <code>argv[0]</code> and zero or more arguments (no shell)</p>
</dd></dl>

<p>In the first form, the string is taken as a command line that is subject to shell expansion before being executed.</p>

<p>The standard shell always means <code>&quot;/bin/sh&quot;</code> on Unix-like systems, otherwise, <code>ENV[&quot;RUBYSHELL&quot;]</code> or <code>ENV[&quot;COMSPEC&quot;]</code> on Windows and similar.  The command is passed as an argument to the <code>&quot;-c&quot;</code> switch to the shell, except in the case of <code>COMSPEC</code>.</p>

<p>If the string from the first form (<code>exec(&quot;command&quot;)</code>) follows these simple rules:</p>
<ul><li>
<p>no meta characters,</p>
</li><li>
<p>not starting with shell reserved word or special built-in,</p>
</li></ul>

<p>Ruby invokes the command directly without shell.</p>

<p>You can force shell invocation by adding “;” to the string (because “;” is a meta character).</p>

<p>Note that this behavior is observable by pid obtained (return value of spawn() and <a href="IO.html#method-i-pid"><code>IO#pid</code></a> for <a href="IO.html#method-c-popen"><code>IO.popen</code></a>) is the pid of the invoked command, not shell.</p>

<p>In the second form (<code>exec(&quot;command1&quot;, &quot;arg1&quot;, ...)</code>), the first is taken as a command name and the rest are passed as parameters to command with no shell expansion.</p>

<p>In the third form (<code>exec([&quot;command&quot;, &quot;argv0&quot;], &quot;arg1&quot;, ...)</code>), starting a two-element array at the beginning of the command, the first element is the command to be executed, and the second argument is used as the <code>argv[0]</code> value, which may show up in process listings.</p>

<p>In order to execute the command, one of the <code>exec(2)</code> system calls are used, so the running command may inherit some of the environment of the original program (including open file descriptors).</p>

<p>This behavior is modified by the given <code>env</code> and <code>options</code> parameters. See ::spawn for details.</p>

<p>If the command fails to execute (typically Errno::ENOENT when it was not found) a <a href="SystemCallError.html"><code>SystemCallError</code></a> exception is raised.</p>

<p>This method modifies process attributes according to given <code>options</code> before <code>exec(2)</code> system call. See ::spawn for more details about the given <code>options</code>.</p>

<p>The modified attributes may be retained when <code>exec(2)</code> system call fails.</p>

<p>For example, hard resource limits are not restorable.</p>

<p>Consider to create a child process using ::spawn or <a href="Kernel.html#method-i-system"><code>Kernel#system</code></a> if this is not acceptable.</p>

<pre class="ruby"><span class="ruby-identifier">exec</span> <span class="ruby-string">&quot;echo *&quot;</span>       <span class="ruby-comment"># echoes list of files in current directory</span>
<span class="ruby-comment"># never get here</span>

<span class="ruby-identifier">exec</span> <span class="ruby-string">&quot;echo&quot;</span>, <span class="ruby-string">&quot;*&quot;</span>    <span class="ruby-comment"># echoes an asterisk</span>
<span class="ruby-comment"># never get here</span>
</pre>

          <div class="method-source-code" id="exec-source">
            <pre>static VALUE
f_exec(int c, const VALUE *a, VALUE _)
{
    rb_f_exec(c, a);
    UNREACHABLE_RETURN(Qnil);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-exit" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              exit(status=true)
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              Kernel::exit(status=true)
            </span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              Process::exit(status=true)
            </span>
          </div>
        </div>

        <div class="method-description">
          <p>Initiates the termination of the Ruby script by raising the <a href="SystemExit.html"><code>SystemExit</code></a> exception. This exception may be caught. The optional parameter is used to return a status code to the invoking environment. <code>true</code> and <code>FALSE</code> of <em>status</em> means success and failure respectively.  The interpretation of other integer values are system dependent.</p>

<pre class="ruby"><span class="ruby-keyword">begin</span>
  <span class="ruby-identifier">exit</span>
  <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;never get here&quot;</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">SystemExit</span>
  <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;rescued a SystemExit exception&quot;</span>
<span class="ruby-keyword">end</span>
<span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;after begin block&quot;</span>
</pre>

<p><em>produces:</em></p>

<pre>rescued a SystemExit exception
after begin block</pre>

<p>Just prior to termination, Ruby executes any <code>at_exit</code> functions (see Kernel::at_exit) and runs any object finalizers (see <a href="ObjectSpace.html#method-c-define_finalizer"><code>ObjectSpace::define_finalizer</code></a>).</p>

<pre class="ruby"><span class="ruby-identifier">at_exit</span> { <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;at_exit function&quot;</span> }
<span class="ruby-constant">ObjectSpace</span>.<span class="ruby-identifier">define_finalizer</span>(<span class="ruby-string">&quot;string&quot;</span>,  <span class="ruby-identifier">proc</span> { <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;in finalizer&quot;</span> })
<span class="ruby-identifier">exit</span>
</pre>

<p><em>produces:</em></p>

<pre>at_exit function
in finalizer</pre>

          <div class="method-source-code" id="exit-source">
            <pre>static VALUE
f_exit(int c, const VALUE *a, VALUE _)
{
    rb_f_exit(c, a);
    UNREACHABLE_RETURN(Qnil);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-exit-21" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              exit!(status=false)
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Exits the process immediately. No exit handlers are run. <em>status</em> is returned to the underlying system as the exit status.</p>

<pre class="ruby"><span class="ruby-constant">Process</span>.<span class="ruby-identifier">exit!</span>(<span class="ruby-keyword">true</span>)
</pre>

          <div class="method-source-code" id="exit-21-source">
            <pre>static VALUE
rb_f_exit_bang(int argc, VALUE *argv, VALUE obj)
{
    int istatus;

    if (rb_check_arity(argc, 0, 1) == 1) {
        istatus = exit_status_code(argv[0]);
    }
    else {
        istatus = EXIT_FAILURE;
    }
    _exit(istatus);

    UNREACHABLE_RETURN(Qnil);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-fail" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              raise
            </span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              fail
            </span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              fail(string, cause: $!)
            </span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              fail(exception [, string [, array]], cause: $!)
            </span>
          </div>
        </div>

        <div class="method-description">
          <p>With no arguments, raises the exception in <code>$!</code> or raises a <a href="RuntimeError.html"><code>RuntimeError</code></a> if <code>$!</code> is <code>nil</code>.  With a single <code>String</code> argument, raises a <code>RuntimeError</code> with the string as a message. Otherwise, the first parameter should be an <code>Exception</code> class (or another object that returns an <code>Exception</code> object when sent an <code>exception</code> message).  The optional second parameter sets the message associated with the exception (accessible via <a href="Exception.html#method-i-message"><code>Exception#message</code></a>), and the third parameter is an array of callback information (accessible via <a href="Exception.html#method-i-backtrace"><code>Exception#backtrace</code></a>). The <code>cause</code> of the generated exception (accessible via <a href="Exception.html#method-i-cause"><code>Exception#cause</code></a>) is automatically set to the “current” exception (<code>$!</code>), if any. An alternative value, either an <code>Exception</code> object or <code>nil</code>, can be specified via the <code>:cause</code> argument.</p>

<p>Exceptions are caught by the <code>rescue</code> clause of <code>begin...end</code> blocks.</p>

<pre class="ruby"><span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;Failed to create socket&quot;</span>
<span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;No parameters&quot;</span>, <span class="ruby-identifier">caller</span>
</pre>

        </div>


        <div class="aliases">
          Alias for: <a href="Kernel.html#method-i-raise">raise</a>
        </div>
      </div>

      <div id="method-i-fork" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              fork  [{ block }]   &rarr; integer or nil
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              fork [{ block }]   &rarr; integer or nil
            </span>
          </div>
        </div>

        <div class="method-description">
          <p>Creates a subprocess. If a block is specified, that block is run in the subprocess, and the subprocess terminates with a status of zero. Otherwise, the <code>fork</code> call returns twice, once in the parent, returning the process ID of the child, and once in the child, returning <em>nil</em>. The child process can exit using <a href="Kernel.html#method-i-exit-21"><code>Kernel.exit!</code></a> to avoid running any <code>at_exit</code> functions. The parent process should use <a href="Process.html#method-c-wait"><code>Process.wait</code></a> to collect the termination statuses of its children or use <a href="Process.html#method-c-detach"><code>Process.detach</code></a> to register disinterest in their status; otherwise, the operating system may accumulate zombie processes.</p>

<p>The thread calling fork is the only thread in the created child process. fork doesn’t copy other threads.</p>

<p>If fork is not usable, Process.respond_to?(:fork) returns false.</p>

<p>Note that fork(2) is not available on some platforms like Windows and NetBSD 4. Therefore you should use spawn() instead of fork().</p>

          <div class="method-source-code" id="fork-source">
            <pre>static VALUE
rb_f_fork(VALUE obj)
{
    rb_pid_t pid;

    pid = rb_call_proc__fork();

    if (pid == 0) {
        if (rb_block_given_p()) {
            int status;
            rb_protect(rb_yield, Qundef, &amp;status);
            ruby_stop(status);
        }
        return Qnil;
    }

    return PIDT2NUM(pid);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-format" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">format</span><span
              class="method-args">(*args)</span>
          </div>
        </div>

        <div class="method-description">
          <p>Returns the string resulting from formatting <code>objects</code> into <code>format_string</code>.</p>

<p>For details on <code>format_string</code>, see <a href="format_specifications_rdoc.html">Format Specifications</a>.</p>

<p><a href="Kernel.html#method-i-format"><code>Kernel#format</code></a> is an alias for <a href="Kernel.html#method-i-sprintf"><code>Kernel#sprintf</code></a>.</p>

        </div>


        <div class="aliases">
          Alias for: <a href="Kernel.html#method-i-sprintf">sprintf</a>
        </div>
      </div>

      <div id="method-i-frozen-3F" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              frozen?    &rarr; true or false
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Returns the freeze status of <em>obj</em>.</p>

<pre class="ruby"><span class="ruby-identifier">a</span> = [ <span class="ruby-string">&quot;a&quot;</span>, <span class="ruby-string">&quot;b&quot;</span>, <span class="ruby-string">&quot;c&quot;</span> ]
<span class="ruby-identifier">a</span>.<span class="ruby-identifier">freeze</span>    <span class="ruby-comment">#=&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]</span>
<span class="ruby-identifier">a</span>.<span class="ruby-identifier">frozen?</span>   <span class="ruby-comment">#=&gt; true</span>
</pre>

          <div class="method-source-code" id="frozen-3F-source">
            <pre><span class="ruby-comment"># File kernel.rb, line 67</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">frozen?</span>
  <span class="ruby-constant">Primitive</span>.<span class="ruby-identifier">attr!</span> <span class="ruby-string">&#39;inline&#39;</span>
  <span class="ruby-constant">Primitive</span>.<span class="ruby-identifier">cexpr!</span> <span class="ruby-string">&#39;rb_obj_frozen_p(self)&#39;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-gets" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              gets(sep=$/ [, getline_args])     &rarr; string or nil
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              gets(limit [, getline_args])      &rarr; string or nil
            </span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              gets(sep, limit [, getline_args]) &rarr; string or nil
            </span>
          </div>
        </div>

        <div class="method-description">
          <p>Returns (and assigns to <code>$_</code>) the next line from the list of files in <code>ARGV</code> (or <code>$*</code>), or from standard input if no files are present on the command line. Returns <code>nil</code> at end of file. The optional argument specifies the record separator. The separator is included with the contents of each record. A separator of <code>nil</code> reads the entire contents, and a zero-length separator reads the input one paragraph at a time, where paragraphs are divided by two consecutive newlines.  If the first argument is an integer, or optional second argument is given, the returning string would not be longer than the given value in bytes.  If multiple filenames are present in <code>ARGV</code>, <code>gets(nil)</code> will read the contents one file at a time.</p>

<pre class="ruby"><span class="ruby-constant">ARGV</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;testfile&quot;</span>
<span class="ruby-identifier">print</span> <span class="ruby-keyword">while</span> <span class="ruby-identifier">gets</span>
</pre>

<p><em>produces:</em></p>

<pre class="ruby"><span class="ruby-constant">This</span> <span class="ruby-identifier">is</span> <span class="ruby-identifier">line</span> <span class="ruby-identifier">one</span>
<span class="ruby-constant">This</span> <span class="ruby-identifier">is</span> <span class="ruby-identifier">line</span> <span class="ruby-identifier">two</span>
<span class="ruby-constant">This</span> <span class="ruby-identifier">is</span> <span class="ruby-identifier">line</span> <span class="ruby-identifier">three</span>
<span class="ruby-constant">And</span> <span class="ruby-identifier">so</span> <span class="ruby-identifier">on</span><span class="ruby-operator">...</span>
</pre>

<p>The style of programming using <code>$_</code> as an implicit parameter is gradually losing favor in the Ruby community.</p>

          <div class="method-source-code" id="gets-source">
            <pre>static VALUE
rb_f_gets(int argc, VALUE *argv, VALUE recv)
{
    if (recv == argf) {
        return argf_gets(argc, argv, argf);
    }
    return forward(argf, idGets, argc, argv);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-global_variables" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              global_variables    &rarr; array
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Returns an array of the names of global variables. This includes special regexp global variables such as <code>$~</code> and <code>$+</code>, but does not include the numbered regexp global variables (<code>$1</code>, <code>$2</code>, etc.).</p>

<pre class="ruby"><span class="ruby-identifier">global_variables</span>.<span class="ruby-identifier">grep</span> <span class="ruby-regexp">/std/</span>   <span class="ruby-comment">#=&gt; [:$stdin, :$stdout, :$stderr]</span>
</pre>

          <div class="method-source-code" id="global_variables-source">
            <pre>static VALUE
f_global_variables(VALUE _)
{
    return rb_f_global_variables();
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-gsub" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              gsub(pattern, replacement)    &rarr; $_
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              gsub(pattern) {|...| block }  &rarr; $_
            </span>
          </div>
        </div>

        <div class="method-description">
          <p>Equivalent to <code>$_.gsub...</code>, except that <code>$_</code> will be updated if substitution occurs. Available only when -p/-n command line option specified.</p>

          <div class="method-source-code" id="gsub-source">
            <pre>static VALUE
rb_f_gsub(int argc, VALUE *argv, VALUE _)
{
    VALUE str = rb_funcall_passing_block(uscore_get(), rb_intern(&quot;gsub&quot;), argc, argv);
    rb_lastline_set(str);
    return str;
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-iterator-3F" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              iterator?      &rarr; true or false
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Deprecated.  Use block_given? instead.</p>

          <div class="method-source-code" id="iterator-3F-source">
            <pre>static VALUE
rb_f_iterator_p(VALUE self)
{
    rb_warn_deprecated(&quot;iterator?&quot;, &quot;block_given?&quot;);
    return rb_f_block_given_p(self);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-lambda" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              lambda { |...| block }  &rarr; a_proc
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Equivalent to <a href="Proc.html#method-c-new"><code>Proc.new</code></a>, except the resulting <a href="Proc.html"><code>Proc</code></a> objects check the number of parameters passed when called.</p>

          <div class="method-source-code" id="lambda-source">
            <pre>static VALUE
f_lambda(VALUE _)
{
    f_lambda_warn();
    return rb_block_lambda();
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-load" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">load</span><span
              class="method-args">(file, wrap = false)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Loads and executes the Ruby program in the file <em>filename</em>.</p>

<p>If the filename is an absolute path (e.g. starts with ‘/’), the file will be loaded directly using the absolute path.</p>

<p>If the filename is an explicit relative path (e.g. starts with ‘./’ or ‘../’), the file will be loaded using the relative path from the current directory.</p>

<p>Otherwise, the file will be searched for in the library directories listed in <code>$LOAD_PATH</code> (<code>$:</code>). If the file is found in a directory, it will attempt to load the file relative to that directory.  If the file is not found in any of the directories in <code>$LOAD_PATH</code>, the file will be loaded using the relative path from the current directory.</p>

<p>If the file doesn’t exist when there is an attempt to load it, a <a href="LoadError.html"><code>LoadError</code></a> will be raised.</p>

<p>If the optional <em>wrap</em> parameter is <code>true</code>, the loaded script will be executed under an anonymous module, protecting the calling program’s global namespace.  If the optional <em>wrap</em> parameter is a module, the loaded script will be executed under the given module. In no circumstance will any local variables in the loaded file be propagated to the loading environment.</p>

          <div class="method-source-code" id="load-source">
            <pre><span class="ruby-comment"># File lib/syntax_suggest/core_ext.rb, line 78</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">load</span>(<span class="ruby-identifier">file</span>, <span class="ruby-identifier">wrap</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-identifier">syntax_suggest_original_load</span>(<span class="ruby-identifier">file</span>)
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">SyntaxError</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">e</span>
  <span class="ruby-identifier">require</span> <span class="ruby-string">&quot;syntax_suggest/api&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-constant">SyntaxSuggest</span><span class="ruby-operator">::</span><span class="ruby-constant">DEFAULT_VALUE</span>)

  <span class="ruby-constant">SyntaxSuggest</span>.<span class="ruby-identifier">handle_error</span>(<span class="ruby-identifier">e</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="Kernel.html#method-i-syntax_suggest_original_load">syntax_suggest_original_load</a>
        </div>

      </div>

      <div id="method-i-local_variables" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              local_variables    &rarr; array
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Returns the names of the current local variables.</p>

<pre class="ruby"><span class="ruby-identifier">fred</span> = <span class="ruby-value">1</span>
<span class="ruby-keyword">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">10</span>
   <span class="ruby-comment"># ...</span>
<span class="ruby-keyword">end</span>
<span class="ruby-identifier">local_variables</span>   <span class="ruby-comment">#=&gt; [:fred, :i]</span>
</pre>

          <div class="method-source-code" id="local_variables-source">
            <pre>static VALUE
rb_f_local_variables(VALUE _)
{
    struct local_var_list vars;
    rb_execution_context_t *ec = GET_EC();
    rb_control_frame_t *cfp = vm_get_ruby_level_caller_cfp(ec, RUBY_VM_PREVIOUS_CONTROL_FRAME(ec-&gt;cfp));
    unsigned int i;

    local_var_list_init(&amp;vars);
    while (cfp) {
        if (cfp-&gt;iseq) {
            for (i = 0; i &lt; ISEQ_BODY(cfp-&gt;iseq)-&gt;local_table_size; i++) {
                local_var_list_add(&amp;vars, ISEQ_BODY(cfp-&gt;iseq)-&gt;local_table[i]);
            }
        }
        if (!VM_ENV_LOCAL_P(cfp-&gt;ep)) {
            /* block */
            const VALUE *ep = VM_CF_PREV_EP(cfp);

            if (vm_collect_local_variables_in_heap(ep, &amp;vars)) {
                break;
            }
            else {
                while (cfp-&gt;ep != ep) {
                    cfp = RUBY_VM_PREVIOUS_CONTROL_FRAME(cfp);
                }
            }
        }
        else {
            break;
        }
    }
    return local_var_list_finish(&amp;vars);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-loop" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              loop { block }
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              loop            &rarr; an_enumerator
            </span>
          </div>
        </div>

        <div class="method-description">
          <p>Repeatedly executes the block.</p>

<p>If no block is given, an enumerator is returned instead.</p>

<pre class="ruby"><span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">print</span> <span class="ruby-string">&quot;Input: &quot;</span>
  <span class="ruby-identifier">line</span> = <span class="ruby-identifier">gets</span>
  <span class="ruby-keyword">break</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">line</span> <span class="ruby-keyword">or</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/^q/i</span>
  <span class="ruby-comment"># ...</span>
<span class="ruby-keyword">end</span>
</pre>

<p><a href="StopIteration.html"><code>StopIteration</code></a> raised in the block breaks the loop.  In this case, loop returns the “result” value stored in the exception.</p>

<pre class="ruby"><span class="ruby-identifier">enum</span> = <span class="ruby-constant">Enumerator</span>.<span class="ruby-identifier">new</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">y</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">y</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;one&quot;</span>
  <span class="ruby-identifier">y</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;two&quot;</span>
  <span class="ruby-value">:ok</span>
}

<span class="ruby-identifier">result</span> = <span class="ruby-identifier">loop</span> {
  <span class="ruby-identifier">puts</span> <span class="ruby-identifier">enum</span>.<span class="ruby-identifier">next</span>
} <span class="ruby-comment">#=&gt; :ok</span>
</pre>

          <div class="method-source-code" id="loop-source">
            <pre>static VALUE
rb_f_loop(VALUE self)
{
    RETURN_SIZED_ENUMERATOR(self, 0, 0, rb_f_loop_size);
    return rb_rescue2(loop_i, (VALUE)0, loop_stop, (VALUE)0, rb_eStopIteration, (VALUE)0);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-open" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              open(path, mode = &#39;r&#39;, perm = 0666, **opts)             &rarr; io or nil
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              open(path, mode = &#39;r&#39;, perm = 0666, **opts) {|io| ... } &rarr; obj
            </span>
          </div>
        </div>

        <div class="method-description">
          <p>Creates an <a href="IO.html"><code>IO</code></a> object connected to the given stream, file, or subprocess.</p>

<p>Required string argument <code>path</code> determines which of the following occurs:</p>
<ul><li>
<p>The file at the specified <code>path</code> is opened.</p>
</li><li>
<p>The process forks.</p>
</li><li>
<p>A subprocess is created.</p>
</li></ul>

<p>Each of these is detailed below.</p>

<p><strong>File Opened</strong></p>

<p>If <code>path</code> does <em>not</em> start with a pipe character (<code>&#39;|&#39;</code>), a file stream is opened with <code>File.open(path, mode, perm, **opts)</code>.</p>

<p>With no block given, file stream is returned:</p>

<pre class="ruby"><span class="ruby-identifier">open</span>(<span class="ruby-string">&#39;t.txt&#39;</span>) <span class="ruby-comment"># =&gt; #&lt;File:t.txt&gt;</span>
</pre>

<p>With a block given, calls the block with the open file stream, then closes the stream:</p>

<pre class="ruby"><span class="ruby-identifier">open</span>(<span class="ruby-string">&#39;t.txt&#39;</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span> <span class="ruby-identifier">f</span> } <span class="ruby-comment"># =&gt; #&lt;File:t.txt (closed)&gt;</span>
</pre>

<p>Output:</p>

<pre class="ruby"><span class="ruby-comment">#&lt;File:t.txt&gt;</span>
</pre>

<p>See <a href="File.html#method-c-open"><code>File.open</code></a> for details.</p>

<p><strong>Process Forked</strong></p>

<p>If <code>path</code> is the 2-character string <code>&#39;|-&#39;</code>, the process forks and the child process is connected to the parent.</p>

<p>With no block given:</p>

<pre class="ruby"><span class="ruby-identifier">io</span> = <span class="ruby-identifier">open</span>(<span class="ruby-string">&#39;|-&#39;</span>)
<span class="ruby-keyword">if</span> <span class="ruby-identifier">io</span>
  <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;In parent, child pid is #{io.pid}.&quot;</span>
<span class="ruby-keyword">else</span>
  <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;In child, pid is #{$$}.&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Output:</p>

<pre>In parent, child pid is 27903.
In child, pid is 27903.</pre>

<p>With a block given:</p>

<pre class="ruby"><span class="ruby-identifier">open</span>(<span class="ruby-string">&#39;|-&#39;</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">io</span>
    <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;In parent, child pid is #{io.pid}.&quot;</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;In child, pid is #{$$}.&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Output:</p>

<pre>In parent, child pid is 28427.
In child, pid is 28427.</pre>

<p><strong>Subprocess Created</strong></p>

<p>If <code>path</code> is <code>&#39;|command&#39;</code> (<code>&#39;command&#39; != &#39;-&#39;</code>), a new subprocess runs the command; its open stream is returned. Note that the command may be processed by shell if it contains shell metacharacters.</p>

<p>With no block given:</p>

<pre class="ruby"><span class="ruby-identifier">io</span> = <span class="ruby-identifier">open</span>(<span class="ruby-string">&#39;|echo &quot;Hi!&quot;&#39;</span>) <span class="ruby-comment"># =&gt; #&lt;IO:fd 12&gt;</span>
<span class="ruby-identifier">print</span> <span class="ruby-identifier">io</span>.<span class="ruby-identifier">gets</span>
<span class="ruby-identifier">io</span>.<span class="ruby-identifier">close</span>
</pre>

<p>Output:</p>

<pre class="ruby"><span class="ruby-string">&quot;Hi!&quot;</span>
</pre>

<p>With a block given, calls the block with the stream, then closes the stream:</p>

<pre class="ruby"><span class="ruby-identifier">open</span>(<span class="ruby-string">&#39;|echo &quot;Hi!&quot;&#39;</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">print</span> <span class="ruby-identifier">io</span>.<span class="ruby-identifier">gets</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Output:</p>

<pre class="ruby"><span class="ruby-string">&quot;Hi!&quot;</span>
</pre>

          <div class="method-source-code" id="open-source">
            <pre>static VALUE
rb_f_open(int argc, VALUE *argv, VALUE _)
{
    ID to_open = 0;
    int redirect = FALSE;

    if (argc &gt;= 1) {
        CONST_ID(to_open, &quot;to_open&quot;);
        if (rb_respond_to(argv[0], to_open)) {
            redirect = TRUE;
        }
        else {
            VALUE tmp = argv[0];
            FilePathValue(tmp);
            if (NIL_P(tmp)) {
                redirect = TRUE;
            }
            else {
                VALUE cmd = check_pipe_command(tmp);
                if (!NIL_P(cmd)) {
                    argv[0] = cmd;
                    return rb_io_s_popen(argc, argv, rb_cIO);
                }
            }
        }
    }
    if (redirect) {
        VALUE io = rb_funcallv_kw(argv[0], to_open, argc-1, argv+1, RB_PASS_CALLED_KEYWORDS);

        if (rb_block_given_p()) {
            return rb_ensure(rb_yield, io, io_close, io);
        }
        return io;
    }
    return rb_io_s_open(argc, argv, rb_cFile);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-p" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              p(object)   &rarr; obj
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              p(*objects) &rarr; array of objects
            </span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              p           &rarr; nil
            </span>
          </div>
        </div>

        <div class="method-description">
          <p>For each object <code>obj</code>, executes:</p>

<pre class="ruby"><span class="ruby-identifier">$stdout</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">obj</span>.<span class="ruby-identifier">inspect</span>, <span class="ruby-string">&quot;\n&quot;</span>)
</pre>

<p>With one object given, returns the object; with multiple objects given, returns an array containing the objects; with no object given, returns <code>nil</code>.</p>

<p>Examples:</p>

<pre class="ruby"><span class="ruby-identifier">r</span> = <span class="ruby-constant">Range</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">0</span>, <span class="ruby-value">4</span>)
<span class="ruby-identifier">p</span> <span class="ruby-identifier">r</span>                 <span class="ruby-comment"># =&gt; 0..4</span>
<span class="ruby-identifier">p</span> [<span class="ruby-identifier">r</span>, <span class="ruby-identifier">r</span>, <span class="ruby-identifier">r</span>]         <span class="ruby-comment"># =&gt; [0..4, 0..4, 0..4]</span>
<span class="ruby-identifier">p</span>                   <span class="ruby-comment"># =&gt; nil</span>
</pre>

<p>Output:</p>

<pre class="ruby"><span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">4</span>
[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">4</span>, <span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">4</span>, <span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">4</span>]
</pre>

          <div class="method-source-code" id="p-source">
            <pre>static VALUE
rb_f_p(int argc, VALUE *argv, VALUE self)
{
    int i;
    for (i=0; i&lt;argc; i++) {
        VALUE inspected = rb_obj_as_string(rb_inspect(argv[i]));
        rb_uninterruptible(rb_p_write, inspected);
    }
    return rb_p_result(argc, argv);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-pretty_inspect" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">pretty_inspect</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Returns a pretty printed object as a string.</p>

<p>In order to use this method you must first require the <a href="PP.html"><code>PP</code></a> module:</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;pp&#39;</span>
</pre>

<p>See the <a href="PP.html"><code>PP</code></a> module for more information.</p>

          <div class="method-source-code" id="pretty_inspect-source">
            <pre><span class="ruby-comment"># File lib/pp.rb, line 637</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">pretty_inspect</span>
  <span class="ruby-constant">PP</span>.<span class="ruby-identifier">pp</span>(<span class="ruby-keyword">self</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">dup</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-print" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              print(*objects) &rarr; nil
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Equivalent to <code>$stdout.print(*objects)</code>, this method is the straightforward way to write to <code>$stdout</code>.</p>

<p>Writes the given objects to <code>$stdout</code>; returns <code>nil</code>. Appends the output record separator <code>$OUTPUT_RECORD_SEPARATOR</code> <code>$\</code>), if it is not <code>nil</code>.</p>

<p>With argument <code>objects</code> given, for each object:</p>
<ul><li>
<p>Converts via its method <code>to_s</code> if not a string.</p>
</li><li>
<p>Writes to <code>stdout</code>.</p>
</li><li>
<p>If not the last object, writes the output field separator <code>$OUTPUT_FIELD_SEPARATOR</code> (<code>$,</code> if it is not <code>nil</code>.</p>
</li></ul>

<p>With default separators:</p>

<pre class="ruby"><span class="ruby-identifier">objects</span> = [<span class="ruby-value">0</span>, <span class="ruby-value">0.0</span>, <span class="ruby-constant">Rational</span>(<span class="ruby-value">0</span>, <span class="ruby-value">1</span>), <span class="ruby-constant">Complex</span>(<span class="ruby-value">0</span>, <span class="ruby-value">0</span>), <span class="ruby-value">:zero</span>, <span class="ruby-string">&#39;zero&#39;</span>]
<span class="ruby-identifier">$OUTPUT_RECORD_SEPARATOR</span>
<span class="ruby-identifier">$OUTPUT_FIELD_SEPARATOR</span>
<span class="ruby-identifier">print</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">objects</span>)
</pre>

<p>Output:</p>

<pre>nil
nil
00.00/10+0izerozero</pre>

<p>With specified separators:</p>

<pre class="ruby"><span class="ruby-identifier">$OUTPUT_RECORD_SEPARATOR</span> = <span class="ruby-string">&quot;\n&quot;</span>
<span class="ruby-identifier">$OUTPUT_FIELD_SEPARATOR</span> = <span class="ruby-string">&#39;,&#39;</span>
<span class="ruby-identifier">print</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">objects</span>)
</pre>

<p>Output:</p>

<pre>0,0.0,0/1,0+0i,zero,zero</pre>

<p>With no argument given, writes the content of <code>$_</code> (which is usually the most recent user input):</p>

<pre class="ruby"><span class="ruby-identifier">gets</span>  <span class="ruby-comment"># Sets $_ to the most recent user input.</span>
<span class="ruby-identifier">print</span> <span class="ruby-comment"># Prints $_.</span>
</pre>

          <div class="method-source-code" id="print-source">
            <pre>static VALUE
rb_f_print(int argc, const VALUE *argv, VALUE _)
{
    rb_io_print(argc, argv, rb_ractor_stdout());
    return Qnil;
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-printf" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              printf(format_string, *objects)               &rarr; nil
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              printf(io, format_string, *objects) &rarr; nil
            </span>
          </div>
        </div>

        <div class="method-description">
          <p>Equivalent to:</p>

<pre class="ruby"><span class="ruby-identifier">io</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">sprintf</span>(<span class="ruby-identifier">format_string</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">objects</span>))
</pre>

<p>For details on <code>format_string</code>, see <a href="format_specifications_rdoc.html">Format Specifications</a>.</p>

<p>With the single argument <code>format_string</code>, formats <code>objects</code> into the string, then writes the formatted string to $stdout:</p>

<pre class="ruby"><span class="ruby-identifier">printf</span>(<span class="ruby-string">&#39;%4.4d %10s %2.2f&#39;</span>, <span class="ruby-value">24</span>, <span class="ruby-value">24</span>, <span class="ruby-value">24.0</span>)
</pre>

<p>Output (on $stdout):</p>

<pre>0024         24 24.00#</pre>

<p>With arguments <code>io</code> and <code>format_string</code>, formats <code>objects</code> into the string, then writes the formatted string to <code>io</code>:</p>

<pre class="ruby"><span class="ruby-identifier">printf</span>(<span class="ruby-identifier">$stderr</span>, <span class="ruby-string">&#39;%4.4d %10s %2.2f&#39;</span>, <span class="ruby-value">24</span>, <span class="ruby-value">24</span>, <span class="ruby-value">24.0</span>)
</pre>

<p>Output (on $stderr):</p>

<pre>0024         24 24.00# =&gt; nil</pre>

<p>With no arguments, does nothing.</p>

          <div class="method-source-code" id="printf-source">
            <pre>static VALUE
rb_f_printf(int argc, VALUE *argv, VALUE _)
{
    VALUE out;

    if (argc == 0) return Qnil;
    if (RB_TYPE_P(argv[0], T_STRING)) {
        out = rb_ractor_stdout();
    }
    else {
        out = argv[0];
        argv++;
        argc--;
    }
    rb_io_write(out, rb_f_sprintf(argc, argv));

    return Qnil;
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-proc" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              proc   { |...| block }  &rarr; a_proc
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Equivalent to <a href="Proc.html#method-c-new"><code>Proc.new</code></a>.</p>

          <div class="method-source-code" id="proc-source">
            <pre>static VALUE
f_proc(VALUE _)
{
    return proc_new(rb_cProc, FALSE, TRUE);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-putc" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              putc(int) &rarr; int
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Equivalent to:</p>

<pre class="ruby"><span class="ruby-identifier">$stdout</span>.<span class="ruby-identifier">putc</span>(<span class="ruby-identifier">int</span>)
</pre>

<p>See <a href="IO.html#method-i-putc"><code>IO#putc</code></a> for important information regarding multi-byte characters.</p>

          <div class="method-source-code" id="putc-source">
            <pre>static VALUE
rb_f_putc(VALUE recv, VALUE ch)
{
    VALUE r_stdout = rb_ractor_stdout();
    if (recv == r_stdout) {
        return rb_io_putc(recv, ch);
    }
    return forward(r_stdout, rb_intern(&quot;putc&quot;), 1, &amp;ch);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-puts" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              puts(*objects)    &rarr; nil
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Equivalent to</p>

<pre class="ruby"><span class="ruby-identifier">$stdout</span>.<span class="ruby-identifier">puts</span>(<span class="ruby-identifier">objects</span>)
</pre>

          <div class="method-source-code" id="puts-source">
            <pre>static VALUE
rb_f_puts(int argc, VALUE *argv, VALUE recv)
{
    VALUE r_stdout = rb_ractor_stdout();
    if (recv == r_stdout) {
        return rb_io_puts(argc, argv, recv);
    }
    return forward(r_stdout, rb_intern(&quot;puts&quot;), argc, argv);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-raise" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              raise
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              raise(string, cause: $!)
            </span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              raise(exception [, string [, array]], cause: $!)
            </span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              fail
            </span>
          </div>
        </div>

        <div class="method-description">
          <p>With no arguments, raises the exception in <code>$!</code> or raises a <a href="RuntimeError.html"><code>RuntimeError</code></a> if <code>$!</code> is <code>nil</code>.  With a single <code>String</code> argument, raises a <code>RuntimeError</code> with the string as a message. Otherwise, the first parameter should be an <code>Exception</code> class (or another object that returns an <code>Exception</code> object when sent an <code>exception</code> message).  The optional second parameter sets the message associated with the exception (accessible via <a href="Exception.html#method-i-message"><code>Exception#message</code></a>), and the third parameter is an array of callback information (accessible via <a href="Exception.html#method-i-backtrace"><code>Exception#backtrace</code></a>). The <code>cause</code> of the generated exception (accessible via <a href="Exception.html#method-i-cause"><code>Exception#cause</code></a>) is automatically set to the “current” exception (<code>$!</code>), if any. An alternative value, either an <code>Exception</code> object or <code>nil</code>, can be specified via the <code>:cause</code> argument.</p>

<p>Exceptions are caught by the <code>rescue</code> clause of <code>begin...end</code> blocks.</p>

<pre class="ruby"><span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;Failed to create socket&quot;</span>
<span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;No parameters&quot;</span>, <span class="ruby-identifier">caller</span>
</pre>

          <div class="method-source-code" id="raise-source">
            <pre>static VALUE
f_raise(int c, VALUE *v, VALUE _)
{
    return rb_f_raise(c, v);
}</pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="Kernel.html#method-i-fail">fail</a>
        </div>

      </div>

      <div id="method-i-rand" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              rand(max=0)    &rarr; number
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>If called without an argument, or if <code>max.to_i.abs == 0</code>, rand returns a pseudo-random floating point number between 0.0 and 1.0, including 0.0 and excluding 1.0.</p>

<pre class="ruby"><span class="ruby-identifier">rand</span>        <span class="ruby-comment">#=&gt; 0.2725926052826416</span>
</pre>

<p>When <code>max.abs</code> is greater than or equal to 1, <code>rand</code> returns a pseudo-random integer greater than or equal to 0 and less than <code>max.to_i.abs</code>.</p>

<pre class="ruby"><span class="ruby-identifier">rand</span>(<span class="ruby-value">100</span>)   <span class="ruby-comment">#=&gt; 12</span>
</pre>

<p>When <code>max</code> is a <a href="Range.html"><code>Range</code></a>, <code>rand</code> returns a random number where <code>range.member?(number) == true</code>.</p>

<p>Negative or floating point values for <code>max</code> are allowed, but may give surprising results.</p>

<pre class="ruby"><span class="ruby-identifier">rand</span>(<span class="ruby-value">-100</span>) <span class="ruby-comment"># =&gt; 87</span>
<span class="ruby-identifier">rand</span>(<span class="ruby-value">-0.5</span>) <span class="ruby-comment"># =&gt; 0.8130921818028143</span>
<span class="ruby-identifier">rand</span>(<span class="ruby-value">1.9</span>)  <span class="ruby-comment"># equivalent to rand(1), which is always 0</span>
</pre>

<p><a href="Kernel.html#method-i-srand"><code>Kernel.srand</code></a> may be used to ensure that sequences of random numbers are reproducible between different runs of a program.</p>

<p>See also <a href="Random.html#method-c-rand"><code>Random.rand</code></a>.</p>

          <div class="method-source-code" id="rand-source">
            <pre>static VALUE
rb_f_rand(int argc, VALUE *argv, VALUE obj)
{
    VALUE vmax;
    rb_random_t *rnd = rand_start(default_rand());

    if (rb_check_arity(argc, 0, 1) &amp;&amp; !NIL_P(vmax = argv[0])) {
        VALUE v = rand_range(obj, rnd, vmax);
        if (v != Qfalse) return v;
        vmax = rb_to_int(vmax);
        if (vmax != INT2FIX(0)) {
            v = rand_int(obj, rnd, vmax, 0);
            if (!NIL_P(v)) return v;
        }
    }
    return DBL2NUM(random_real(obj, rnd, TRUE));
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-readline" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              readline(sep = $/, chomp: false)   &rarr; string
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              readline(limit, chomp: false)      &rarr; string
            </span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              readline(sep, limit, chomp: false) &rarr; string
            </span>
          </div>
        </div>

        <div class="method-description">
          <p>Equivalent to method <a href="Kernel.html#method-i-gets"><code>Kernel#gets</code></a>, except that it raises an exception if called at end-of-stream:</p>

<pre>$ cat t.txt | ruby -e &quot;p readlines; readline&quot;
[&quot;First line\n&quot;, &quot;Second line\n&quot;, &quot;\n&quot;, &quot;Fourth line\n&quot;, &quot;Fifth line\n&quot;]
in `readline&#39;: end of file reached (EOFError)</pre>

<p>Optional keyword argument <code>chomp</code> specifies whether line separators are to be omitted.</p>

          <div class="method-source-code" id="readline-source">
            <pre>static VALUE
rb_f_readline(int argc, VALUE *argv, VALUE recv)
{
    if (recv == argf) {
        return argf_readline(argc, argv, argf);
    }
    return forward(argf, rb_intern(&quot;readline&quot;), argc, argv);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-readlines" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              readlines(sep = $/, chomp: false, **enc_opts)   &rarr; array
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              readlines(limit, chomp: false, **enc_opts)       &rarr; array
            </span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              readlines(sep, limit, chomp: false, **enc_opts) &rarr; array
            </span>
          </div>
        </div>

        <div class="method-description">
          <p>Returns an array containing the lines returned by calling <a href="Kernel.html#method-i-gets"><code>Kernel#gets</code></a> until the end-of-stream is reached; (see <a href="IO.html#class-IO-label-Line+IO">Line IO</a>).</p>

<p>With only string argument <code>sep</code> given, returns the remaining lines as determined by line separator <code>sep</code>, or <code>nil</code> if none; see <a href="IO.html#class-IO-label-Line+Separator">Line Separator</a>:</p>

<pre># Default separator.
$ cat t.txt | ruby -e &quot;p readlines&quot;
[&quot;First line\n&quot;, &quot;Second line\n&quot;, &quot;\n&quot;, &quot;Fourth line\n&quot;, &quot;Fifth line\n&quot;]

# Specified separator.
$ cat t.txt | ruby -e &quot;p readlines &#39;li&#39;&quot;
[&quot;First li&quot;, &quot;ne\nSecond li&quot;, &quot;ne\n\nFourth li&quot;, &quot;ne\nFifth li&quot;, &quot;ne\n&quot;]

# Get-all separator.
$ cat t.txt | ruby -e &quot;p readlines nil&quot;
[&quot;First line\nSecond line\n\nFourth line\nFifth line\n&quot;]

# Get-paragraph separator.
$ cat t.txt | ruby -e &quot;p readlines &#39;&#39;&quot;
[&quot;First line\nSecond line\n\n&quot;, &quot;Fourth line\nFifth line\n&quot;]</pre>

<p>With only integer argument <code>limit</code> given, limits the number of bytes in the line; see <a href="IO.html#class-IO-label-Line+Limit">Line Limit</a>:</p>

<pre>$cat t.txt | ruby -e &quot;p readlines 10&quot;
[&quot;First line&quot;, &quot;\n&quot;, &quot;Second lin&quot;, &quot;e\n&quot;, &quot;\n&quot;, &quot;Fourth lin&quot;, &quot;e\n&quot;, &quot;Fifth line&quot;, &quot;\n&quot;]

$cat t.txt | ruby -e &quot;p readlines 11&quot;
[&quot;First line\n&quot;, &quot;Second line&quot;, &quot;\n&quot;, &quot;\n&quot;, &quot;Fourth line&quot;, &quot;\n&quot;, &quot;Fifth line\n&quot;]

$cat t.txt | ruby -e &quot;p readlines 12&quot;
[&quot;First line\n&quot;, &quot;Second line\n&quot;, &quot;\n&quot;, &quot;Fourth line\n&quot;, &quot;Fifth line\n&quot;]</pre>

<p>With arguments <code>sep</code> and <code>limit</code> given, combines the two behaviors; see <a href="IO.html#class-IO-label-Line+Separator+and+Line+Limit">Line Separator and Line Limit</a>.</p>

<p>Optional keyword argument <code>chomp</code> specifies whether line separators are to be omitted:</p>

<pre>$ cat t.txt | ruby -e &quot;p readlines(chomp: true)&quot;
[&quot;First line&quot;, &quot;Second line&quot;, &quot;&quot;, &quot;Fourth line&quot;, &quot;Fifth line&quot;]</pre>

<p>Optional keyword arguments <code>enc_opts</code> specify encoding options; see <a href="encodings_rdoc.html#label-Encoding+Options">Encoding options</a>.</p>

          <div class="method-source-code" id="readlines-source">
            <pre>static VALUE
rb_f_readlines(int argc, VALUE *argv, VALUE recv)
{
    if (recv == argf) {
        return argf_readlines(argc, argv, argf);
    }
    return forward(argf, rb_intern(&quot;readlines&quot;), argc, argv);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-require_relative" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">require_relative</span><span
              class="method-args">(file)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Ruby tries to load the library named <em>string</em> relative to the directory containing the requiring file.  If the file does not exist a <a href="LoadError.html"><code>LoadError</code></a> is raised. Returns <code>true</code> if the file was loaded and <code>false</code> if the file was already loaded before.</p>

          <div class="method-source-code" id="require_relative-source">
            <pre><span class="ruby-comment"># File lib/syntax_suggest/core_ext.rb, line 94</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">require_relative</span>(<span class="ruby-identifier">file</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-constant">Pathname</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">file</span>).<span class="ruby-identifier">absolute?</span>
    <span class="ruby-identifier">syntax_suggest_original_require</span> <span class="ruby-identifier">file</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">relative_from</span> = <span class="ruby-identifier">caller_locations</span>(<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">1</span>).<span class="ruby-identifier">first</span>
    <span class="ruby-identifier">relative_from_path</span> = <span class="ruby-identifier">relative_from</span>.<span class="ruby-identifier">absolute_path</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">relative_from</span>.<span class="ruby-identifier">path</span>
    <span class="ruby-identifier">syntax_suggest_original_require</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-node">&quot;../#{file}&quot;</span>, <span class="ruby-identifier">relative_from_path</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">SyntaxError</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">e</span>
  <span class="ruby-identifier">require</span> <span class="ruby-string">&quot;syntax_suggest/api&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-constant">SyntaxSuggest</span><span class="ruby-operator">::</span><span class="ruby-constant">DEFAULT_VALUE</span>)

  <span class="ruby-constant">SyntaxSuggest</span>.<span class="ruby-identifier">handle_error</span>(<span class="ruby-identifier">e</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="Kernel.html#method-i-syntax_suggest_original_require_relative">syntax_suggest_original_require_relative</a>
        </div>

      </div>

      <div id="method-i-select" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              select(read_ios, write_ios = [], error_ios = [], timeout = nil) &rarr; array or nil
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Invokes system call <a href="https://linux.die.net/man/2/select">select(2)</a>, which monitors multiple file descriptors, waiting until one or more of the file descriptors becomes ready for some class of I/O operation.</p>

<p>Not implemented on all platforms.</p>

<p>Each of the arguments <code>read_ios</code>, <code>write_ios</code>, and <code>error_ios</code> is an array of <a href="IO.html"><code>IO</code></a> objects.</p>

<p>Argument <code>timeout</code> is an integer timeout interval in seconds.</p>

<p>The method monitors the IO objects given in all three arrays, waiting for some to be ready; returns a 3-element array whose elements are:</p>
<ul><li>
<p>An array of the objects in <code>read_ios</code> that are ready for reading.</p>
</li><li>
<p>An array of the objects in <code>write_ios</code> that are ready for writing.</p>
</li><li>
<p>An array of the objects in <code>error_ios</code> have pending exceptions.</p>
</li></ul>

<p>If no object becomes ready within the given <code>timeout</code>, <code>nil</code> is returned.</p>

<p>IO.select peeks the buffer of IO objects for testing readability. If the IO buffer is not empty, IO.select immediately notifies readability.  This “peek” only happens for IO objects.  It does not happen for IO-like objects such as <a href="OpenSSL/SSL/SSLSocket.html"><code>OpenSSL::SSL::SSLSocket</code></a>.</p>

<p>The best way to use IO.select is invoking it after non-blocking methods such as read_nonblock, write_nonblock, etc.  The methods raise an exception which is extended by <a href="IO/WaitReadable.html"><code>IO::WaitReadable</code></a> or <a href="IO/WaitWritable.html"><code>IO::WaitWritable</code></a>.  The modules notify how the caller should wait with IO.select.  If <a href="IO/WaitReadable.html"><code>IO::WaitReadable</code></a> is raised, the caller should wait for reading.  If <a href="IO/WaitWritable.html"><code>IO::WaitWritable</code></a> is raised, the caller should wait for writing.</p>

<p>So, blocking read (readpartial) can be emulated using read_nonblock and IO.select as follows:</p>

<pre class="ruby"><span class="ruby-keyword">begin</span>
  <span class="ruby-identifier">result</span> = <span class="ruby-identifier">io_like</span>.<span class="ruby-identifier">read_nonblock</span>(<span class="ruby-identifier">maxlen</span>)
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">IO</span><span class="ruby-operator">::</span><span class="ruby-constant">WaitReadable</span>
  <span class="ruby-constant">IO</span>.<span class="ruby-identifier">select</span>([<span class="ruby-identifier">io_like</span>])
  <span class="ruby-keyword">retry</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">IO</span><span class="ruby-operator">::</span><span class="ruby-constant">WaitWritable</span>
  <span class="ruby-constant">IO</span>.<span class="ruby-identifier">select</span>(<span class="ruby-keyword">nil</span>, [<span class="ruby-identifier">io_like</span>])
  <span class="ruby-keyword">retry</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Especially, the combination of non-blocking methods and IO.select is preferred for <a href="IO.html"><code>IO</code></a> like objects such as <a href="OpenSSL/SSL/SSLSocket.html"><code>OpenSSL::SSL::SSLSocket</code></a>.  It has to_io method to return underlying <a href="IO.html"><code>IO</code></a> object.  <a href="IO.html#method-c-select"><code>IO.select</code></a> calls to_io to obtain the file descriptor to wait.</p>

<p>This means that readability notified by IO.select doesn’t mean readability from <a href="OpenSSL/SSL/SSLSocket.html"><code>OpenSSL::SSL::SSLSocket</code></a> object.</p>

<p>The most likely situation is that <a href="OpenSSL/SSL/SSLSocket.html"><code>OpenSSL::SSL::SSLSocket</code></a> buffers some data.  IO.select doesn’t see the buffer.  So IO.select can block when <a href="OpenSSL/Buffering.html#method-i-readpartial"><code>OpenSSL::SSL::SSLSocket#readpartial</code></a> doesn’t block.</p>

<p>However, several more complicated situations exist.</p>

<p>SSL is a protocol which is sequence of records. The record consists of multiple bytes. So, the remote side of SSL sends a partial record, <a href="IO.html#method-c-select"><code>IO.select</code></a> notifies readability but <a href="OpenSSL/SSL/SSLSocket.html"><code>OpenSSL::SSL::SSLSocket</code></a> cannot decrypt a byte and <a href="OpenSSL/Buffering.html#method-i-readpartial"><code>OpenSSL::SSL::SSLSocket#readpartial</code></a> will block.</p>

<p>Also, the remote side can request SSL renegotiation which forces the local SSL engine to write some data. This means <a href="OpenSSL/Buffering.html#method-i-readpartial"><code>OpenSSL::SSL::SSLSocket#readpartial</code></a> may invoke write system call and it can block. In such a situation, <a href="OpenSSL/Buffering.html#method-i-read_nonblock"><code>OpenSSL::SSL::SSLSocket#read_nonblock</code></a> raises <a href="IO/WaitWritable.html"><code>IO::WaitWritable</code></a> instead of blocking. So, the caller should wait for ready for writability as above example.</p>

<p>The combination of non-blocking methods and IO.select is also useful for streams such as tty, pipe socket socket when multiple processes read from a stream.</p>

<p>Finally, Linux kernel developers don’t guarantee that readability of select(2) means readability of following read(2) even for a single process; see <a href="https://linux.die.net/man/2/select">select(2)</a></p>

<p>Invoking IO.select before <a href="IO.html#method-i-readpartial"><code>IO#readpartial</code></a> works well as usual. However it is not the best way to use IO.select.</p>

<p>The writability notified by select(2) doesn’t show how many bytes are writable. <a href="IO.html#method-i-write"><code>IO#write</code></a> method blocks until given whole string is written. So, <code>IO#write(two or more bytes)</code> can block after writability is notified by IO.select.  <a href="IO.html#method-i-write_nonblock"><code>IO#write_nonblock</code></a> is required to avoid the blocking.</p>

<p>Blocking write (write) can be emulated using write_nonblock and <a href="IO.html#method-c-select"><code>IO.select</code></a> as follows: <a href="IO/WaitReadable.html"><code>IO::WaitReadable</code></a> should also be rescued for SSL renegotiation in <a href="OpenSSL/SSL/SSLSocket.html"><code>OpenSSL::SSL::SSLSocket</code></a>.</p>

<pre class="ruby"><span class="ruby-keyword">while</span> <span class="ruby-value">0</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">string</span>.<span class="ruby-identifier">bytesize</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">written</span> = <span class="ruby-identifier">io_like</span>.<span class="ruby-identifier">write_nonblock</span>(<span class="ruby-identifier">string</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">IO</span><span class="ruby-operator">::</span><span class="ruby-constant">WaitReadable</span>
    <span class="ruby-constant">IO</span>.<span class="ruby-identifier">select</span>([<span class="ruby-identifier">io_like</span>])
    <span class="ruby-keyword">retry</span>
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">IO</span><span class="ruby-operator">::</span><span class="ruby-constant">WaitWritable</span>
    <span class="ruby-constant">IO</span>.<span class="ruby-identifier">select</span>(<span class="ruby-keyword">nil</span>, [<span class="ruby-identifier">io_like</span>])
    <span class="ruby-keyword">retry</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">string</span> = <span class="ruby-identifier">string</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-identifier">written</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>)
<span class="ruby-keyword">end</span>
</pre>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">rp</span>, <span class="ruby-identifier">wp</span> = <span class="ruby-constant">IO</span>.<span class="ruby-identifier">pipe</span>
<span class="ruby-identifier">mesg</span> = <span class="ruby-string">&quot;ping &quot;</span>
<span class="ruby-value">100</span>.<span class="ruby-identifier">times</span> {
  <span class="ruby-comment"># IO.select follows IO#read.  Not the best way to use IO.select.</span>
  <span class="ruby-identifier">rs</span>, <span class="ruby-identifier">ws</span>, = <span class="ruby-constant">IO</span>.<span class="ruby-identifier">select</span>([<span class="ruby-identifier">rp</span>], [<span class="ruby-identifier">wp</span>])
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">r</span> = <span class="ruby-identifier">rs</span>[<span class="ruby-value">0</span>]
    <span class="ruby-identifier">ret</span> = <span class="ruby-identifier">r</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value">5</span>)
    <span class="ruby-identifier">print</span> <span class="ruby-identifier">ret</span>
    <span class="ruby-keyword">case</span> <span class="ruby-identifier">ret</span>
    <span class="ruby-keyword">when</span> <span class="ruby-regexp">/ping/</span>
      <span class="ruby-identifier">mesg</span> = <span class="ruby-string">&quot;pong\n&quot;</span>
    <span class="ruby-keyword">when</span> <span class="ruby-regexp">/pong/</span>
      <span class="ruby-identifier">mesg</span> = <span class="ruby-string">&quot;ping &quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">w</span> = <span class="ruby-identifier">ws</span>[<span class="ruby-value">0</span>]
    <span class="ruby-identifier">w</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">mesg</span>)
  <span class="ruby-keyword">end</span>
}
</pre>

<p>Output:</p>

<pre class="ruby"><span class="ruby-identifier">ping</span> <span class="ruby-identifier">pong</span>
<span class="ruby-identifier">ping</span> <span class="ruby-identifier">pong</span>
<span class="ruby-identifier">ping</span> <span class="ruby-identifier">pong</span>
(<span class="ruby-identifier">snipped</span>)
<span class="ruby-identifier">ping</span>
</pre>

          <div class="method-source-code" id="select-source">
            <pre>static VALUE
rb_f_select(int argc, VALUE *argv, VALUE obj)
{
    VALUE scheduler = rb_fiber_scheduler_current();
    if (scheduler != Qnil) {
        // It&#39;s optionally supported.
        VALUE result = rb_fiber_scheduler_io_selectv(scheduler, argc, argv);
        if (!UNDEF_P(result)) return result;
    }

    VALUE timeout;
    struct select_args args;
    struct timeval timerec;
    int i;

    rb_scan_args(argc, argv, &quot;13&quot;, &amp;args.read, &amp;args.write, &amp;args.except, &amp;timeout);
    if (NIL_P(timeout)) {
        args.timeout = 0;
    }
    else {
        timerec = rb_time_interval(timeout);
        args.timeout = &amp;timerec;
    }

    for (i = 0; i &lt; numberof(args.fdsets); ++i)
        rb_fd_init(&amp;args.fdsets[i]);

    return rb_ensure(select_call, (VALUE)&amp;args, select_end, (VALUE)&amp;args);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-set_trace_func" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              set_trace_func(proc)    &rarr; proc
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              set_trace_func(nil)     &rarr; nil
            </span>
          </div>
        </div>

        <div class="method-description">
          <pre>Establishes _proc_ as the handler for tracing, or disables
tracing if the parameter is +nil+.

*Note:* this method is obsolete, please use TracePoint instead.

_proc_ takes up to six parameters:

*   an event name
*   a filename
*   a line number
*   an object id
*   a binding
*   the name of a class

_proc_ is invoked whenever an event occurs.

Events are:

+c-call+:: call a C-language routine
+c-return+:: return from a C-language routine
+call+:: call a Ruby method
+class+:: start a class or module definition
+end+:: finish a class or module definition
+line+:: execute code on a new line
+raise+:: raise an exception
+return+:: return from a Ruby method

Tracing is disabled within the context of _proc_.

    class Test
    def test
      a = 1
      b = 2
    end
    end

    set_trace_func proc { |event, file, line, id, binding, classname|
       printf &quot;%8s %s:%-2d %10s %8s\n&quot;, event, file, line, id, classname
    }
    t = Test.new
    t.test

      line prog.rb:11               false
    c-call prog.rb:11        new    Class
    c-call prog.rb:11 initialize   Object
  c-return prog.rb:11 initialize   Object
  c-return prog.rb:11        new    Class
      line prog.rb:12               false
      call prog.rb:2        test     Test
      line prog.rb:3        test     Test
      line prog.rb:4        test     Test
    return prog.rb:4        test     Test</pre>

<p>Note that for <code>c-call</code> and <code>c-return</code> events, the binding returned is the binding of the nearest Ruby method calling the C method, since C methods themselves do not have bindings.</p>

          <div class="method-source-code" id="set_trace_func-source">
            <pre>static VALUE
set_trace_func(VALUE obj, VALUE trace)
{
    rb_remove_event_hook(call_trace_func);

    if (NIL_P(trace)) {
        return Qnil;
    }

    if (!rb_obj_is_proc(trace)) {
        rb_raise(rb_eTypeError, &quot;trace_func needs to be Proc&quot;);
    }

    rb_add_event_hook(call_trace_func, RUBY_EVENT_ALL, trace);
    return trace;
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-sleep" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              sleep([duration])    &rarr; integer
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Suspends the current thread for <em>duration</em> seconds (which may be any number, including a <code>Float</code> with fractional seconds). Returns the actual number of seconds slept (rounded), which may be less than that asked for if another thread calls <a href="Thread.html#method-i-run"><code>Thread#run</code></a>. Called without an argument, sleep() will sleep forever.</p>

<pre class="ruby"><span class="ruby-constant">Time</span>.<span class="ruby-identifier">new</span>    <span class="ruby-comment">#=&gt; 2008-03-08 19:56:19 +0900</span>
<span class="ruby-identifier">sleep</span> <span class="ruby-value">1.2</span>   <span class="ruby-comment">#=&gt; 1</span>
<span class="ruby-constant">Time</span>.<span class="ruby-identifier">new</span>    <span class="ruby-comment">#=&gt; 2008-03-08 19:56:20 +0900</span>
<span class="ruby-identifier">sleep</span> <span class="ruby-value">1.9</span>   <span class="ruby-comment">#=&gt; 2</span>
<span class="ruby-constant">Time</span>.<span class="ruby-identifier">new</span>    <span class="ruby-comment">#=&gt; 2008-03-08 19:56:22 +0900</span>
</pre>

          <div class="method-source-code" id="sleep-source">
            <pre>static VALUE
rb_f_sleep(int argc, VALUE *argv, VALUE _)
{
    time_t beg = time(0);
    VALUE scheduler = rb_fiber_scheduler_current();

    if (scheduler != Qnil) {
        rb_fiber_scheduler_kernel_sleepv(scheduler, argc, argv);
    }
    else {
        if (argc == 0) {
            rb_thread_sleep_forever();
        }
        else {
            rb_check_arity(argc, 0, 1);
            rb_thread_wait_for(rb_time_interval(argv[0]));
        }
    }

    time_t end = time(0) - beg;

    return TIMET2NUM(end);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-spawn" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              spawn([env,] command... [,options])     &rarr; pid
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              spawn([env,] command... [,options])     &rarr; pid
            </span>
          </div>
        </div>

        <div class="method-description">
          <p>spawn executes specified command and return its pid.</p>

<pre class="ruby"><span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-string">&quot;tar xf ruby-2.0.0-p195.tar.bz2&quot;</span>)
<span class="ruby-constant">Process</span>.<span class="ruby-identifier">wait</span> <span class="ruby-identifier">pid</span>

<span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-constant">RbConfig</span>.<span class="ruby-identifier">ruby</span>, <span class="ruby-string">&quot;-eputs&#39;Hello, world!&#39;&quot;</span>)
<span class="ruby-constant">Process</span>.<span class="ruby-identifier">wait</span> <span class="ruby-identifier">pid</span>
</pre>

<p>This method is similar to <a href="Kernel.html#method-i-system"><code>Kernel#system</code></a> but it doesn’t wait for the command to finish.</p>

<p>The parent process should use <a href="Process.html#method-c-wait"><code>Process.wait</code></a> to collect the termination status of its child or use <a href="Process.html#method-c-detach"><code>Process.detach</code></a> to register disinterest in their status; otherwise, the operating system may accumulate zombie processes.</p>

<p>spawn has bunch of options to specify process attributes:</p>

<pre>env: hash
  name =&gt; val : set the environment variable
  name =&gt; nil : unset the environment variable

  the keys and the values except for +nil+ must be strings.
command...:
  commandline                 : command line string which is passed to the standard shell
  cmdname, arg1, ...          : command name and one or more arguments (This form does not use the shell. See below for caveats.)
  [cmdname, argv0], arg1, ... : command name, argv[0] and zero or more arguments (no shell)
options: hash
  clearing environment variables:
    :unsetenv_others =&gt; true   : clear environment variables except specified by env
    :unsetenv_others =&gt; false  : don&#39;t clear (default)
  process group:
    :pgroup =&gt; true or 0 : make a new process group
    :pgroup =&gt; pgid      : join the specified process group
    :pgroup =&gt; nil       : don&#39;t change the process group (default)
  create new process group: Windows only
    :new_pgroup =&gt; true  : the new process is the root process of a new process group
    :new_pgroup =&gt; false : don&#39;t create a new process group (default)
  resource limit: resourcename is core, cpu, data, etc.  See Process.setrlimit.
    :rlimit_resourcename =&gt; limit
    :rlimit_resourcename =&gt; [cur_limit, max_limit]
  umask:
    :umask =&gt; int
  redirection:
    key:
      FD              : single file descriptor in child process
      [FD, FD, ...]   : multiple file descriptor in child process
    value:
      FD                        : redirect to the file descriptor in parent process
      string                    : redirect to file with open(string, &quot;r&quot; or &quot;w&quot;)
      [string]                  : redirect to file with open(string, File::RDONLY)
      [string, open_mode]       : redirect to file with open(string, open_mode, 0644)
      [string, open_mode, perm] : redirect to file with open(string, open_mode, perm)
      [:child, FD]              : redirect to the redirected file descriptor
      :close                    : close the file descriptor in child process
    FD is one of follows
      :in     : the file descriptor 0 which is the standard input
      :out    : the file descriptor 1 which is the standard output
      :err    : the file descriptor 2 which is the standard error
      integer : the file descriptor of specified the integer
      io      : the file descriptor specified as io.fileno
  file descriptor inheritance: close non-redirected non-standard fds (3, 4, 5, ...) or not
    :close_others =&gt; false  : inherit
  current directory:
    :chdir =&gt; str</pre>

<p>The <code>cmdname, arg1, ...</code> form does not use the shell. However, on different OSes, different things are provided as built-in commands. An example of this is +‘echo’+, which is a built-in on Windows, but is a normal program on Linux and Mac OS X. This means that <code>Process.spawn &#39;echo&#39;, &#39;%Path%&#39;</code> will display the contents of the <code>%Path%</code> environment variable on Windows, but <code>Process.spawn &#39;echo&#39;, &#39;$PATH&#39;</code> prints the literal <code>$PATH</code>.</p>

<p>If a hash is given as <code>env</code>, the environment is updated by <code>env</code> before <code>exec(2)</code> in the child process. If a pair in <code>env</code> has nil as the value, the variable is deleted.</p>

<pre class="ruby"><span class="ruby-comment"># set FOO as BAR and unset BAZ.</span>
<span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>({<span class="ruby-string">&quot;FOO&quot;</span><span class="ruby-operator">=&gt;</span><span class="ruby-string">&quot;BAR&quot;</span>, <span class="ruby-string">&quot;BAZ&quot;</span><span class="ruby-operator">=&gt;</span><span class="ruby-keyword">nil</span>}, <span class="ruby-identifier">command</span>)
</pre>

<p>If a hash is given as <code>options</code>, it specifies process group, create new process group, resource limit, current directory, umask and redirects for the child process. Also, it can be specified to clear environment variables.</p>

<p>The <code>:unsetenv_others</code> key in <code>options</code> specifies to clear environment variables, other than specified by <code>env</code>.</p>

<pre class="ruby"><span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-identifier">command</span>, <span class="ruby-value">:unsetenv_others</span><span class="ruby-operator">=&gt;</span><span class="ruby-keyword">true</span>) <span class="ruby-comment"># no environment variable</span>
<span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>({<span class="ruby-string">&quot;FOO&quot;</span><span class="ruby-operator">=&gt;</span><span class="ruby-string">&quot;BAR&quot;</span>}, <span class="ruby-identifier">command</span>, <span class="ruby-value">:unsetenv_others</span><span class="ruby-operator">=&gt;</span><span class="ruby-keyword">true</span>) <span class="ruby-comment"># FOO only</span>
</pre>

<p>The <code>:pgroup</code> key in <code>options</code> specifies a process group. The corresponding value should be true, zero, a positive integer, or nil. true and zero cause the process to be a process leader of a new process group. A non-zero positive integer causes the process to join the provided process group. The default value, nil, causes the process to remain in the same process group.</p>

<pre class="ruby"><span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-identifier">command</span>, <span class="ruby-value">:pgroup</span><span class="ruby-operator">=&gt;</span><span class="ruby-keyword">true</span>) <span class="ruby-comment"># process leader</span>
<span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-identifier">command</span>, <span class="ruby-value">:pgroup</span><span class="ruby-operator">=&gt;</span><span class="ruby-value">10</span>) <span class="ruby-comment"># belongs to the process group 10</span>
</pre>

<p>The <code>:new_pgroup</code> key in <code>options</code> specifies to pass <code>CREATE_NEW_PROCESS_GROUP</code> flag to <code>CreateProcessW()</code> that is Windows API. This option is only for Windows. true means the new process is the root process of the new process group. The new process has CTRL+C disabled. This flag is necessary for <code>Process.kill(:SIGINT, pid)</code> on the subprocess. :new_pgroup is false by default.</p>

<pre class="ruby"><span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-identifier">command</span>, <span class="ruby-value">:new_pgroup</span><span class="ruby-operator">=&gt;</span><span class="ruby-keyword">true</span>)  <span class="ruby-comment"># new process group</span>
<span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-identifier">command</span>, <span class="ruby-value">:new_pgroup</span><span class="ruby-operator">=&gt;</span><span class="ruby-keyword">false</span>) <span class="ruby-comment"># same process group</span>
</pre>

<p>The <code>:rlimit_</code><em>foo</em> key specifies a resource limit. <em>foo</em> should be one of resource types such as <code>core</code>. The corresponding value should be an integer or an array which have one or two integers: same as cur_limit and max_limit arguments for <a href="Process.html#method-c-setrlimit"><code>Process.setrlimit</code></a>.</p>

<pre class="ruby"><span class="ruby-identifier">cur</span>, <span class="ruby-identifier">max</span> = <span class="ruby-constant">Process</span>.<span class="ruby-identifier">getrlimit</span>(<span class="ruby-value">:CORE</span>)
<span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-identifier">command</span>, <span class="ruby-value">:rlimit_core</span><span class="ruby-operator">=&gt;</span>[<span class="ruby-value">0</span>,<span class="ruby-identifier">max</span>]) <span class="ruby-comment"># disable core temporary.</span>
<span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-identifier">command</span>, <span class="ruby-value">:rlimit_core</span><span class="ruby-operator">=&gt;</span><span class="ruby-identifier">max</span>) <span class="ruby-comment"># enable core dump</span>
<span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-identifier">command</span>, <span class="ruby-value">:rlimit_core</span><span class="ruby-operator">=&gt;</span><span class="ruby-value">0</span>) <span class="ruby-comment"># never dump core.</span>
</pre>

<p>The <code>:umask</code> key in <code>options</code> specifies the umask.</p>

<pre class="ruby"><span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-identifier">command</span>, <span class="ruby-value">:umask</span><span class="ruby-operator">=&gt;</span><span class="ruby-value">077</span>)
</pre>

<p>The :in, :out, :err, an integer, an <a href="IO.html"><code>IO</code></a> and an array key specifies a redirection. The redirection maps a file descriptor in the child process.</p>

<p>For example, stderr can be merged into stdout as follows:</p>

<pre class="ruby"><span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-identifier">command</span>, <span class="ruby-value">:err</span><span class="ruby-operator">=&gt;</span><span class="ruby-value">:out</span>)
<span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-identifier">command</span>, <span class="ruby-value">2</span><span class="ruby-operator">=&gt;</span><span class="ruby-value">1</span>)
<span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-identifier">command</span>, <span class="ruby-constant">STDERR</span><span class="ruby-operator">=&gt;</span><span class="ruby-value">:out</span>)
<span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-identifier">command</span>, <span class="ruby-constant">STDERR</span><span class="ruby-operator">=&gt;</span><span class="ruby-constant">STDOUT</span>)
</pre>

<p>The hash keys specifies a file descriptor in the child process started by <a href="Kernel.html#method-i-spawn"><code>spawn</code></a>. :err, 2 and STDERR specifies the standard error stream (stderr).</p>

<p>The hash values specifies a file descriptor in the parent process which invokes <a href="Kernel.html#method-i-spawn"><code>spawn</code></a>. :out, 1 and STDOUT specifies the standard output stream (stdout).</p>

<p>In the above example, the standard output in the child process is not specified. So it is inherited from the parent process.</p>

<p>The standard input stream (stdin) can be specified by :in, 0 and STDIN.</p>

<p>A filename can be specified as a hash value.</p>

<pre class="ruby"><span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-identifier">command</span>, <span class="ruby-value">:in</span><span class="ruby-operator">=&gt;</span><span class="ruby-string">&quot;/dev/null&quot;</span>) <span class="ruby-comment"># read mode</span>
<span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-identifier">command</span>, <span class="ruby-value">:out</span><span class="ruby-operator">=&gt;</span><span class="ruby-string">&quot;/dev/null&quot;</span>) <span class="ruby-comment"># write mode</span>
<span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-identifier">command</span>, <span class="ruby-value">:err</span><span class="ruby-operator">=&gt;</span><span class="ruby-string">&quot;log&quot;</span>) <span class="ruby-comment"># write mode</span>
<span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-identifier">command</span>, [<span class="ruby-value">:out</span>, <span class="ruby-value">:err</span>]<span class="ruby-operator">=&gt;</span><span class="ruby-string">&quot;/dev/null&quot;</span>) <span class="ruby-comment"># write mode</span>
<span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-identifier">command</span>, <span class="ruby-value">3</span><span class="ruby-operator">=&gt;</span><span class="ruby-string">&quot;/dev/null&quot;</span>) <span class="ruby-comment"># read mode</span>
</pre>

<p>For stdout and stderr (and combination of them), it is opened in write mode. Otherwise read mode is used.</p>

<p>For specifying flags and permission of file creation explicitly, an array is used instead.</p>

<pre class="ruby"><span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-identifier">command</span>, <span class="ruby-value">:in</span><span class="ruby-operator">=&gt;</span>[<span class="ruby-string">&quot;file&quot;</span>]) <span class="ruby-comment"># read mode is assumed</span>
<span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-identifier">command</span>, <span class="ruby-value">:in</span><span class="ruby-operator">=&gt;</span>[<span class="ruby-string">&quot;file&quot;</span>, <span class="ruby-string">&quot;r&quot;</span>])
<span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-identifier">command</span>, <span class="ruby-value">:out</span><span class="ruby-operator">=&gt;</span>[<span class="ruby-string">&quot;log&quot;</span>, <span class="ruby-string">&quot;w&quot;</span>]) <span class="ruby-comment"># 0644 assumed</span>
<span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-identifier">command</span>, <span class="ruby-value">:out</span><span class="ruby-operator">=&gt;</span>[<span class="ruby-string">&quot;log&quot;</span>, <span class="ruby-string">&quot;w&quot;</span>, <span class="ruby-value">0600</span>])
<span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-identifier">command</span>, <span class="ruby-value">:out</span><span class="ruby-operator">=&gt;</span>[<span class="ruby-string">&quot;log&quot;</span>, <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">WRONLY</span><span class="ruby-operator">|</span><span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">EXCL</span><span class="ruby-operator">|</span><span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">CREAT</span>, <span class="ruby-value">0600</span>])
</pre>

<p>The array specifies a filename, flags and permission. The flags can be a string or an integer. If the flags is omitted or nil, File::RDONLY is assumed. The permission should be an integer. If the permission is omitted or nil, 0644 is assumed.</p>

<p>If an array of IOs and integers are specified as a hash key, all the elements are redirected.</p>

<pre class="ruby"><span class="ruby-comment"># stdout and stderr is redirected to log file.</span>
<span class="ruby-comment"># The file &quot;log&quot; is opened just once.</span>
<span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-identifier">command</span>, [<span class="ruby-value">:out</span>, <span class="ruby-value">:err</span>]<span class="ruby-operator">=&gt;</span>[<span class="ruby-string">&quot;log&quot;</span>, <span class="ruby-string">&quot;w&quot;</span>])
</pre>

<p>Another way to merge multiple file descriptors is [:child, fd]. [:child, fd] means the file descriptor in the child process. This is different from fd. For example, :err=&gt;:out means redirecting child stderr to parent stdout. But :err=&gt;[:child, :out] means redirecting child stderr to child stdout. They differ if stdout is redirected in the child process as follows.</p>

<pre class="ruby"><span class="ruby-comment"># stdout and stderr is redirected to log file.</span>
<span class="ruby-comment"># The file &quot;log&quot; is opened just once.</span>
<span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-identifier">command</span>, <span class="ruby-value">:out</span><span class="ruby-operator">=&gt;</span>[<span class="ruby-string">&quot;log&quot;</span>, <span class="ruby-string">&quot;w&quot;</span>], <span class="ruby-value">:err</span><span class="ruby-operator">=&gt;</span>[<span class="ruby-value">:child</span>, <span class="ruby-value">:out</span>])
</pre>

<p>[:child, :out] can be used to merge stderr into stdout in <a href="IO.html#method-c-popen"><code>IO.popen</code></a>. In this case, <a href="IO.html#method-c-popen"><code>IO.popen</code></a> redirects stdout to a pipe in the child process and [:child, :out] refers the redirected stdout.</p>

<pre class="ruby"><span class="ruby-identifier">io</span> = <span class="ruby-constant">IO</span>.<span class="ruby-identifier">popen</span>([<span class="ruby-string">&quot;sh&quot;</span>, <span class="ruby-string">&quot;-c&quot;</span>, <span class="ruby-string">&quot;echo out; echo err &gt;&amp;2&quot;</span>, <span class="ruby-value">:err</span><span class="ruby-operator">=&gt;</span>[<span class="ruby-value">:child</span>, <span class="ruby-value">:out</span>]])
<span class="ruby-identifier">p</span> <span class="ruby-identifier">io</span>.<span class="ruby-identifier">read</span> <span class="ruby-comment">#=&gt; &quot;out\nerr\n&quot;</span>
</pre>

<p>The <code>:chdir</code> key in <code>options</code> specifies the current directory.</p>

<pre class="ruby"><span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-identifier">command</span>, <span class="ruby-value">:chdir</span><span class="ruby-operator">=&gt;</span><span class="ruby-string">&quot;/var/tmp&quot;</span>)
</pre>

<p>spawn closes all non-standard unspecified descriptors by default. The “standard” descriptors are 0, 1 and 2. This behavior is specified by :close_others option. :close_others doesn’t affect the standard descriptors which are closed only if :close is specified explicitly.</p>

<pre class="ruby"><span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-identifier">command</span>, <span class="ruby-value">:close_others</span><span class="ruby-operator">=&gt;</span><span class="ruby-keyword">true</span>)  <span class="ruby-comment"># close 3,4,5,... (default)</span>
<span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-identifier">command</span>, <span class="ruby-value">:close_others</span><span class="ruby-operator">=&gt;</span><span class="ruby-keyword">false</span>) <span class="ruby-comment"># don&#39;t close 3,4,5,...</span>
</pre>

<p>:close_others is false by default for spawn and <a href="IO.html#method-c-popen"><code>IO.popen</code></a>.</p>

<p>Note that fds which close-on-exec flag is already set are closed regardless of :close_others option.</p>

<p>So <a href="IO.html#method-c-pipe"><code>IO.pipe</code></a> and spawn can be used as <a href="IO.html#method-c-popen"><code>IO.popen</code></a>.</p>

<pre class="ruby"><span class="ruby-comment"># similar to r = IO.popen(command)</span>
<span class="ruby-identifier">r</span>, <span class="ruby-identifier">w</span> = <span class="ruby-constant">IO</span>.<span class="ruby-identifier">pipe</span>
<span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-identifier">command</span>, <span class="ruby-value">:out</span><span class="ruby-operator">=&gt;</span><span class="ruby-identifier">w</span>)   <span class="ruby-comment"># r, w is closed in the child process.</span>
<span class="ruby-identifier">w</span>.<span class="ruby-identifier">close</span>
</pre>

<p>:close is specified as a hash value to close a fd individually.</p>

<pre class="ruby"><span class="ruby-identifier">f</span> = <span class="ruby-identifier">open</span>(<span class="ruby-identifier">foo</span>)
<span class="ruby-identifier">system</span>(<span class="ruby-identifier">command</span>, <span class="ruby-identifier">f</span><span class="ruby-operator">=&gt;</span><span class="ruby-value">:close</span>)        <span class="ruby-comment"># don&#39;t inherit f.</span>
</pre>

<p>If a file descriptor need to be inherited, io=&gt;io can be used.</p>

<pre class="ruby"><span class="ruby-comment"># valgrind has --log-fd option for log destination.</span>
<span class="ruby-comment"># log_w=&gt;log_w indicates log_w.fileno inherits to child process.</span>
<span class="ruby-identifier">log_r</span>, <span class="ruby-identifier">log_w</span> = <span class="ruby-constant">IO</span>.<span class="ruby-identifier">pipe</span>
<span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-string">&quot;valgrind&quot;</span>, <span class="ruby-node">&quot;--log-fd=#{log_w.fileno}&quot;</span>, <span class="ruby-string">&quot;echo&quot;</span>, <span class="ruby-string">&quot;a&quot;</span>, <span class="ruby-identifier">log_w</span><span class="ruby-operator">=&gt;</span><span class="ruby-identifier">log_w</span>)
<span class="ruby-identifier">log_w</span>.<span class="ruby-identifier">close</span>
<span class="ruby-identifier">p</span> <span class="ruby-identifier">log_r</span>.<span class="ruby-identifier">read</span>
</pre>

<p>It is also possible to exchange file descriptors.</p>

<pre class="ruby"><span class="ruby-identifier">pid</span> = <span class="ruby-identifier">spawn</span>(<span class="ruby-identifier">command</span>, <span class="ruby-value">:out</span><span class="ruby-operator">=&gt;</span><span class="ruby-value">:err</span>, <span class="ruby-value">:err</span><span class="ruby-operator">=&gt;</span><span class="ruby-value">:out</span>)
</pre>

<p>The hash keys specify file descriptors in the child process. The hash values specifies file descriptors in the parent process. So the above specifies exchanging stdout and stderr. Internally, <code>spawn</code> uses an extra file descriptor to resolve such cyclic file descriptor mapping.</p>

<p>See <a href="Kernel.html#method-i-exec"><code>Kernel.exec</code></a> for the standard shell.</p>

          <div class="method-source-code" id="spawn-source">
            <pre>static VALUE
rb_f_spawn(int argc, VALUE *argv, VALUE _)
{
    rb_pid_t pid;
    char errmsg[CHILD_ERRMSG_BUFLEN] = { &#39;\0&#39; };
    VALUE execarg_obj, fail_str;
    struct rb_execarg *eargp;

    execarg_obj = rb_execarg_new(argc, argv, TRUE, FALSE);
    eargp = rb_execarg_get(execarg_obj);
    fail_str = eargp-&gt;use_shell ? eargp-&gt;invoke.sh.shell_script : eargp-&gt;invoke.cmd.command_name;

    pid = rb_execarg_spawn(execarg_obj, errmsg, sizeof(errmsg));

    if (pid == -1) {
        int err = errno;
        rb_exec_fail(eargp, err, errmsg);
        RB_GC_GUARD(execarg_obj);
        rb_syserr_fail_str(err, fail_str);
    }
#if defined(HAVE_WORKING_FORK) || defined(HAVE_SPAWNV)
    return PIDT2NUM(pid);
#else
    return Qnil;
#endif
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-sprintf" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              sprintf(format_string *objects)  &rarr; string
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Returns the string resulting from formatting <code>objects</code> into <code>format_string</code>.</p>

<p>For details on <code>format_string</code>, see <a href="format_specifications_rdoc.html">Format Specifications</a>.</p>

<p><a href="Kernel.html#method-i-format"><code>Kernel#format</code></a> is an alias for <a href="Kernel.html#method-i-sprintf"><code>Kernel#sprintf</code></a>.</p>

          <div class="method-source-code" id="sprintf-source">
            <pre>static VALUE
f_sprintf(int c, const VALUE *v, VALUE _)
{
    return rb_f_sprintf(c, v);
}</pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="Kernel.html#method-i-format">format</a>
        </div>

      </div>

      <div id="method-i-srand" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              srand(number = Random.new_seed) &rarr; old_seed
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Seeds the system pseudo-random number generator, with <code>number</code>. The previous seed value is returned.</p>

<p>If <code>number</code> is omitted, seeds the generator using a source of entropy provided by the operating system, if available (/dev/urandom on Unix systems or the RSA cryptographic provider on Windows), which is then combined with the time, the process id, and a sequence number.</p>

<p>srand may be used to ensure repeatable sequences of pseudo-random numbers between different runs of the program. By setting the seed to a known value, programs can be made deterministic during testing.</p>

<pre class="ruby"><span class="ruby-identifier">srand</span> <span class="ruby-value">1234</span>               <span class="ruby-comment"># =&gt; 268519324636777531569100071560086917274</span>
[ <span class="ruby-identifier">rand</span>, <span class="ruby-identifier">rand</span> ]           <span class="ruby-comment"># =&gt; [0.1915194503788923, 0.6221087710398319]</span>
[ <span class="ruby-identifier">rand</span>(<span class="ruby-value">10</span>), <span class="ruby-identifier">rand</span>(<span class="ruby-value">1000</span>) ] <span class="ruby-comment"># =&gt; [4, 664]</span>
<span class="ruby-identifier">srand</span> <span class="ruby-value">1234</span>               <span class="ruby-comment"># =&gt; 1234</span>
[ <span class="ruby-identifier">rand</span>, <span class="ruby-identifier">rand</span> ]           <span class="ruby-comment"># =&gt; [0.1915194503788923, 0.6221087710398319]</span>
</pre>

          <div class="method-source-code" id="srand-source">
            <pre>static VALUE
rb_f_srand(int argc, VALUE *argv, VALUE obj)
{
    VALUE seed, old;
    rb_random_mt_t *r = rand_mt_start(default_rand());

    if (rb_check_arity(argc, 0, 1) == 0) {
        seed = random_seed(obj);
    }
    else {
        seed = rb_to_int(argv[0]);
    }
    old = r-&gt;base.seed;
    rand_init(&amp;random_mt_if, &amp;r-&gt;base, seed);
    r-&gt;base.seed = seed;

    return old;
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-sub" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              sub(pattern, replacement)   &rarr; $_
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              sub(pattern) {|...| block } &rarr; $_
            </span>
          </div>
        </div>

        <div class="method-description">
          <p>Equivalent to <code>$_.sub(<em>args</em>)</code>, except that <code>$_</code> will be updated if substitution occurs. Available only when -p/-n command line option specified.</p>

          <div class="method-source-code" id="sub-source">
            <pre>static VALUE
rb_f_sub(int argc, VALUE *argv, VALUE _)
{
    VALUE str = rb_funcall_passing_block(uscore_get(), rb_intern(&quot;sub&quot;), argc, argv);
    rb_lastline_set(str);
    return str;
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-syntax_suggest_original_load" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">syntax_suggest_original_load</span><span
              class="method-args">(file, wrap = false)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="Kernel.html#method-i-load">load</a>
        </div>
      </div>

      <div id="method-i-syntax_suggest_original_require" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">syntax_suggest_original_require</span><span
              class="method-args">(path)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="Kernel.html#method-i-require">require</a>
        </div>
      </div>

      <div id="method-i-syntax_suggest_original_require_relative" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">syntax_suggest_original_require_relative</span><span
              class="method-args">(file)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="Kernel.html#method-i-require_relative">require_relative</a>
        </div>
      </div>

      <div id="method-i-syscall" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              syscall(integer_callno, *arguments)   &rarr; integer
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Invokes Posix system call <a href="https://linux.die.net/man/2/syscall">syscall(2)</a>, which calls a specified function.</p>

<p>Calls the operating system function identified by <code>integer_callno</code>; returns the result of the function or raises <a href="SystemCallError.html"><code>SystemCallError</code></a> if it failed. The effect of the call is platform-dependent. The arguments and returned value are platform-dependent.</p>

<p>For each of <code>arguments</code>: if it is an integer, it is passed directly; if it is a string, it is interpreted as a binary sequence of bytes. There may be as many as nine such arguments.</p>

<p>Arguments <code>integer_callno</code> and <code>argument</code>, as well as the returned value, are platform-dependent.</p>

<p>Note: <a href="Method.html"><code>Method</code></a> <code>syscall</code> is essentially unsafe and unportable. The DL (<a href="Fiddle.html"><code>Fiddle</code></a>) library is preferred for safer and a bit more portable programming.</p>

<p>Not implemented on all platforms.</p>

          <div class="method-source-code" id="syscall-source">
            <pre>static VALUE
rb_f_syscall(int argc, VALUE *argv, VALUE _)
{
    VALUE arg[8];
#if SIZEOF_VOIDP == 8 &amp;&amp; defined(HAVE___SYSCALL) &amp;&amp; SIZEOF_INT != 8 /* mainly *BSD */
# define SYSCALL __syscall
# define NUM2SYSCALLID(x) NUM2LONG(x)
# define RETVAL2NUM(x) LONG2NUM(x)
# if SIZEOF_LONG == 8
    long num, retval = -1;
# elif SIZEOF_LONG_LONG == 8
    long long num, retval = -1;
# else
#  error ----&gt;&gt; it is asserted that __syscall takes the first argument and returns retval in 64bit signed integer. &lt;&lt;----
# endif
#elif defined(__linux__)
# define SYSCALL syscall
# define NUM2SYSCALLID(x) NUM2LONG(x)
# define RETVAL2NUM(x) LONG2NUM(x)
    /*
     * Linux man page says, syscall(2) function prototype is below.
     *
     *     int syscall(int number, ...);
     *
     * But, it&#39;s incorrect. Actual one takes and returned long. (see unistd.h)
     */
    long num, retval = -1;
#else
# define SYSCALL syscall
# define NUM2SYSCALLID(x) NUM2INT(x)
# define RETVAL2NUM(x) INT2NUM(x)
    int num, retval = -1;
#endif
    int i;

    if (RTEST(ruby_verbose)) {
        rb_category_warning(RB_WARN_CATEGORY_DEPRECATED,
            &quot;We plan to remove a syscall function at future release. DL(Fiddle) provides safer alternative.&quot;);
    }

    if (argc == 0)
        rb_raise(rb_eArgError, &quot;too few arguments for syscall&quot;);
    if (argc &gt; numberof(arg))
        rb_raise(rb_eArgError, &quot;too many arguments for syscall&quot;);
    num = NUM2SYSCALLID(argv[0]); ++argv;
    for (i = argc - 1; i--; ) {
        VALUE v = rb_check_string_type(argv[i]);

        if (!NIL_P(v)) {
            SafeStringValue(v);
            rb_str_modify(v);
            arg[i] = (VALUE)StringValueCStr(v);
        }
        else {
            arg[i] = (VALUE)NUM2LONG(argv[i]);
        }
    }

    switch (argc) {
      case 1:
        retval = SYSCALL(num);
        break;
      case 2:
        retval = SYSCALL(num, arg[0]);
        break;
      case 3:
        retval = SYSCALL(num, arg[0],arg[1]);
        break;
      case 4:
        retval = SYSCALL(num, arg[0],arg[1],arg[2]);
        break;
      case 5:
        retval = SYSCALL(num, arg[0],arg[1],arg[2],arg[3]);
        break;
      case 6:
        retval = SYSCALL(num, arg[0],arg[1],arg[2],arg[3],arg[4]);
        break;
      case 7:
        retval = SYSCALL(num, arg[0],arg[1],arg[2],arg[3],arg[4],arg[5]);
        break;
      case 8:
        retval = SYSCALL(num, arg[0],arg[1],arg[2],arg[3],arg[4],arg[5],arg[6]);
        break;
    }

    if (retval == -1)
        rb_sys_fail(0);
    return RETVAL2NUM(retval);
#undef SYSCALL
#undef NUM2SYSCALLID
#undef RETVAL2NUM
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-system" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              system([env,] command... [,options], exception: false)    &rarr; true, false or nil
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Executes <em>command…</em> in a subshell. <em>command…</em> is one of following forms.</p>

<p>This method has potential security vulnerabilities if called with untrusted input; see <a href="command_injection_rdoc.html">Command Injection</a>.</p>
<dl class="rdoc-list label-list"><dt><code>commandline</code>
<dd>
<p>command line string which is passed to the standard shell</p>
</dd><dt><code>cmdname, arg1, ...</code>
<dd>
<p>command name and one or more arguments (no shell)</p>
</dd><dt><code>[cmdname, argv0], arg1, ...</code>
<dd>
<p>command name, <code>argv[0]</code> and zero or more arguments (no shell)</p>
</dd></dl>

<p>system returns <code>true</code> if the command gives zero exit status, <code>false</code> for non zero exit status. Returns <code>nil</code> if command execution fails. An error status is available in <code>$?</code>.</p>

<p>If the <code>exception: true</code> argument is passed, the method raises an exception instead of returning <code>false</code> or <code>nil</code>.</p>

<p>The arguments are processed in the same way as for <a href="Kernel.html#method-i-spawn"><code>Kernel#spawn</code></a>.</p>

<p>The hash arguments, env and options, are same as <a href="Kernel.html#method-i-exec"><code>exec</code></a> and <a href="Kernel.html#method-i-spawn"><code>spawn</code></a>. See <a href="Kernel.html#method-i-spawn"><code>Kernel#spawn</code></a> for details.</p>

<pre class="ruby"><span class="ruby-identifier">system</span>(<span class="ruby-string">&quot;echo *&quot;</span>)
<span class="ruby-identifier">system</span>(<span class="ruby-string">&quot;echo&quot;</span>, <span class="ruby-string">&quot;*&quot;</span>)
</pre>

<p><em>produces:</em></p>

<pre>config.h main.rb
*</pre>

<p>Error handling:</p>

<pre class="ruby"><span class="ruby-identifier">system</span>(<span class="ruby-string">&quot;cat nonexistent.txt&quot;</span>)
<span class="ruby-comment"># =&gt; false</span>
<span class="ruby-identifier">system</span>(<span class="ruby-string">&quot;catt nonexistent.txt&quot;</span>)
<span class="ruby-comment"># =&gt; nil</span>

<span class="ruby-identifier">system</span>(<span class="ruby-string">&quot;cat nonexistent.txt&quot;</span>, <span class="ruby-value">exception:</span> <span class="ruby-keyword">true</span>)
<span class="ruby-comment"># RuntimeError (Command failed with exit 1: cat)</span>
<span class="ruby-identifier">system</span>(<span class="ruby-string">&quot;catt nonexistent.txt&quot;</span>, <span class="ruby-value">exception:</span> <span class="ruby-keyword">true</span>)
<span class="ruby-comment"># Errno::ENOENT (No such file or directory - catt)</span>
</pre>

<p>See <a href="Kernel.html#method-i-exec"><code>Kernel#exec</code></a> for the standard shell.</p>

          <div class="method-source-code" id="system-source">
            <pre>static VALUE
rb_f_system(int argc, VALUE *argv, VALUE _)
{
    VALUE execarg_obj = rb_execarg_new(argc, argv, TRUE, TRUE);
    struct rb_execarg *eargp = rb_execarg_get(execarg_obj);

    struct rb_process_status status = {0};
    eargp-&gt;status = &amp;status;

    rb_last_status_clear();

    // This function can set the thread&#39;s last status.
    // May be different from waitpid_state.pid on exec failure.
    rb_pid_t pid = rb_execarg_spawn(execarg_obj, 0, 0);

    if (pid &gt; 0) {
        VALUE status = rb_process_status_wait(pid, 0);
        struct rb_process_status *data = RTYPEDDATA_DATA(status);

        // Set the last status:
        rb_obj_freeze(status);
        GET_THREAD()-&gt;last_status = status;

        if (data-&gt;status == EXIT_SUCCESS) {
            return Qtrue;
        }

        if (data-&gt;error != 0) {
            if (eargp-&gt;exception) {
                VALUE command = eargp-&gt;invoke.sh.shell_script;
                RB_GC_GUARD(execarg_obj);
                rb_syserr_fail_str(data-&gt;error, command);
            }
            else {
                return Qnil;
            }
        }
        else if (eargp-&gt;exception) {
            VALUE command = eargp-&gt;invoke.sh.shell_script;
            VALUE str = rb_str_new_cstr(&quot;Command failed with&quot;);
            rb_str_cat_cstr(pst_message_status(str, data-&gt;status), &quot;: &quot;);
            rb_str_append(str, command);
            RB_GC_GUARD(execarg_obj);
            rb_exc_raise(rb_exc_new_str(rb_eRuntimeError, str));
        }
        else {
            return Qfalse;
        }

        RB_GC_GUARD(status);
    }

    if (eargp-&gt;exception) {
        VALUE command = eargp-&gt;invoke.sh.shell_script;
        RB_GC_GUARD(execarg_obj);
        rb_syserr_fail_str(errno, command);
    }
    else {
        return Qnil;
    }
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-tap" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              tap {|x| block }    &rarr; obj
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Yields self to the block, and then returns self. The primary purpose of this method is to “tap into” a method chain, in order to perform operations on intermediate results within the chain.</p>

<pre class="ruby">(<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">10</span>)                  .<span class="ruby-identifier">tap</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;original: #{x}&quot;</span> }
  .<span class="ruby-identifier">to_a</span>                  .<span class="ruby-identifier">tap</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;array:    #{x}&quot;</span> }
  .<span class="ruby-identifier">select</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">even?</span> } .<span class="ruby-identifier">tap</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;evens:    #{x}&quot;</span> }
  .<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span><span class="ruby-operator">*</span><span class="ruby-identifier">x</span> }        .<span class="ruby-identifier">tap</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;squares:  #{x}&quot;</span> }
</pre>

          <div class="method-source-code" id="tap-source">
            <pre><span class="ruby-comment"># File kernel.rb, line 89</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">tap</span>
  <span class="ruby-keyword">yield</span>(<span class="ruby-keyword">self</span>)
  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-test" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              test(cmd, file1 [, file2] ) &rarr; obj
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Uses the character <code>cmd</code> to perform various tests on <code>file1</code> (first table below) or on <code>file1</code> and <code>file2</code> (second table).</p>

<p><a href="File.html"><code>File</code></a> tests on a single file:</p>

<pre>Cmd    Returns   Meaning
&quot;A&quot;  | Time    | Last access time for file1
&quot;b&quot;  | boolean | True if file1 is a block device
&quot;c&quot;  | boolean | True if file1 is a character device
&quot;C&quot;  | Time    | Last change time for file1
&quot;d&quot;  | boolean | True if file1 exists and is a directory
&quot;e&quot;  | boolean | True if file1 exists
&quot;f&quot;  | boolean | True if file1 exists and is a regular file
&quot;g&quot;  | boolean | True if file1 has the setgid bit set
&quot;G&quot;  | boolean | True if file1 exists and has a group
     |         | ownership equal to the caller&#39;s group
&quot;k&quot;  | boolean | True if file1 exists and has the sticky bit set
&quot;l&quot;  | boolean | True if file1 exists and is a symbolic link
&quot;M&quot;  | Time    | Last modification time for file1
&quot;o&quot;  | boolean | True if file1 exists and is owned by
     |         | the caller&#39;s effective uid
&quot;O&quot;  | boolean | True if file1 exists and is owned by
     |         | the caller&#39;s real uid
&quot;p&quot;  | boolean | True if file1 exists and is a fifo
&quot;r&quot;  | boolean | True if file1 is readable by the effective
     |         | uid/gid of the caller
&quot;R&quot;  | boolean | True if file is readable by the real
     |         | uid/gid of the caller
&quot;s&quot;  | int/nil | If file1 has nonzero size, return the size,
     |         | otherwise return nil
&quot;S&quot;  | boolean | True if file1 exists and is a socket
&quot;u&quot;  | boolean | True if file1 has the setuid bit set
&quot;w&quot;  | boolean | True if file1 exists and is writable by
     |         | the effective uid/gid
&quot;W&quot;  | boolean | True if file1 exists and is writable by
     |         | the real uid/gid
&quot;x&quot;  | boolean | True if file1 exists and is executable by
     |         | the effective uid/gid
&quot;X&quot;  | boolean | True if file1 exists and is executable by
     |         | the real uid/gid
&quot;z&quot;  | boolean | True if file1 exists and has a zero length</pre>

<p>Tests that take two files:</p>

<pre>&quot;-&quot;  | boolean | True if file1 and file2 are identical
&quot;=&quot;  | boolean | True if the modification times of file1
     |         | and file2 are equal
&quot;&lt;&quot;  | boolean | True if the modification time of file1
     |         | is prior to that of file2
&quot;&gt;&quot;  | boolean | True if the modification time of file1
     |         | is after that of file2</pre>

          <div class="method-source-code" id="test-source">
            <pre>static VALUE
rb_f_test(int argc, VALUE *argv, VALUE _)
{
    int cmd;

    if (argc == 0) rb_check_arity(argc, 2, 3);
    cmd = NUM2CHR(argv[0]);
    if (cmd == 0) {
        goto unknown;
    }
    if (strchr(&quot;bcdefgGkloOprRsSuwWxXz&quot;, cmd)) {
        CHECK(1);
        switch (cmd) {
          case &#39;b&#39;:
            return rb_file_blockdev_p(0, argv[1]);

          case &#39;c&#39;:
            return rb_file_chardev_p(0, argv[1]);

          case &#39;d&#39;:
            return rb_file_directory_p(0, argv[1]);

          case &#39;e&#39;:
            return rb_file_exist_p(0, argv[1]);

          case &#39;f&#39;:
            return rb_file_file_p(0, argv[1]);

          case &#39;g&#39;:
            return rb_file_sgid_p(0, argv[1]);

          case &#39;G&#39;:
            return rb_file_grpowned_p(0, argv[1]);

          case &#39;k&#39;:
            return rb_file_sticky_p(0, argv[1]);

          case &#39;l&#39;:
            return rb_file_symlink_p(0, argv[1]);

          case &#39;o&#39;:
            return rb_file_owned_p(0, argv[1]);

          case &#39;O&#39;:
            return rb_file_rowned_p(0, argv[1]);

          case &#39;p&#39;:
            return rb_file_pipe_p(0, argv[1]);

          case &#39;r&#39;:
            return rb_file_readable_p(0, argv[1]);

          case &#39;R&#39;:
            return rb_file_readable_real_p(0, argv[1]);

          case &#39;s&#39;:
            return rb_file_size_p(0, argv[1]);

          case &#39;S&#39;:
            return rb_file_socket_p(0, argv[1]);

          case &#39;u&#39;:
            return rb_file_suid_p(0, argv[1]);

          case &#39;w&#39;:
            return rb_file_writable_p(0, argv[1]);

          case &#39;W&#39;:
            return rb_file_writable_real_p(0, argv[1]);

          case &#39;x&#39;:
            return rb_file_executable_p(0, argv[1]);

          case &#39;X&#39;:
            return rb_file_executable_real_p(0, argv[1]);

          case &#39;z&#39;:
            return rb_file_zero_p(0, argv[1]);
        }
    }

    if (strchr(&quot;MAC&quot;, cmd)) {
        struct stat st;
        VALUE fname = argv[1];

        CHECK(1);
        if (rb_stat(fname, &amp;st) == -1) {
            int e = errno;
            FilePathValue(fname);
            rb_syserr_fail_path(e, fname);
        }

        switch (cmd) {
          case &#39;A&#39;:
            return stat_atime(&amp;st);
          case &#39;M&#39;:
            return stat_mtime(&amp;st);
          case &#39;C&#39;:
            return stat_ctime(&amp;st);
        }
    }

    if (cmd == &#39;-&#39;) {
        CHECK(2);
        return rb_file_identical_p(0, argv[1], argv[2]);
    }

    if (strchr(&quot;=&lt;&gt;&quot;, cmd)) {
        struct stat st1, st2;
        struct timespec t1, t2;

        CHECK(2);
        if (rb_stat(argv[1], &amp;st1) &lt; 0) return Qfalse;
        if (rb_stat(argv[2], &amp;st2) &lt; 0) return Qfalse;

        t1 = stat_mtimespec(&amp;st1);
        t2 = stat_mtimespec(&amp;st2);

        switch (cmd) {
          case &#39;=&#39;:
            if (t1.tv_sec == t2.tv_sec &amp;&amp; t1.tv_nsec == t2.tv_nsec) return Qtrue;
            return Qfalse;

          case &#39;&gt;&#39;:
            if (t1.tv_sec &gt; t2.tv_sec) return Qtrue;
            if (t1.tv_sec == t2.tv_sec &amp;&amp; t1.tv_nsec &gt; t2.tv_nsec) return Qtrue;
            return Qfalse;

          case &#39;&lt;&#39;:
            if (t1.tv_sec &lt; t2.tv_sec) return Qtrue;
            if (t1.tv_sec == t2.tv_sec &amp;&amp; t1.tv_nsec &lt; t2.tv_nsec) return Qtrue;
            return Qfalse;
        }
    }
  unknown:
    /* unknown command */
    if (ISPRINT(cmd)) {
        rb_raise(rb_eArgError, &quot;unknown command &#39;%s%c&#39;&quot;, cmd == &#39;\&#39;&#39; || cmd == &#39;\\&#39; ? &quot;\\&quot; : &quot;&quot;, cmd);
    }
    else {
        rb_raise(rb_eArgError, &quot;unknown command \&quot;\\x%02X\&quot;&quot;, cmd);
    }
    UNREACHABLE_RETURN(Qundef);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-then" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              then {|x| block }          &rarr; an_object
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Yields self to the block and returns the result of the block.</p>

<pre class="ruby"><span class="ruby-value">3</span>.<span class="ruby-identifier">next</span>.<span class="ruby-identifier">then</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span><span class="ruby-operator">**</span><span class="ruby-identifier">x</span> }.<span class="ruby-identifier">to_s</span>             <span class="ruby-comment">#=&gt; &quot;256&quot;</span>
</pre>

<p>Good usage for <code>then</code> is value piping in method chains:</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;open-uri&#39;</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;json&#39;</span>

<span class="ruby-identifier">construct_url</span>(<span class="ruby-identifier">arguments</span>).
  <span class="ruby-identifier">then</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">url</span><span class="ruby-operator">|</span> <span class="ruby-constant">URI</span>(<span class="ruby-identifier">url</span>).<span class="ruby-identifier">read</span> }.
  <span class="ruby-identifier">then</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">response</span><span class="ruby-operator">|</span> <span class="ruby-constant">JSON</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">response</span>) }
</pre>

<p>When called without block, the method returns <code>Enumerator</code>, which can be used, for example, for conditional circuit-breaking:</p>

<pre class="ruby"><span class="ruby-comment"># meets condition, no-op</span>
<span class="ruby-value">1</span>.<span class="ruby-identifier">then</span>.<span class="ruby-identifier">detect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:odd?</span>)            <span class="ruby-comment"># =&gt; 1</span>
<span class="ruby-comment"># does not meet condition, drop value</span>
<span class="ruby-value">2</span>.<span class="ruby-identifier">then</span>.<span class="ruby-identifier">detect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:odd?</span>)            <span class="ruby-comment"># =&gt; nil</span>
</pre>

          <div class="method-source-code" id="then-source">
            <pre><span class="ruby-comment"># File kernel.rb, line 120</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">then</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-constant">Primitive</span>.<span class="ruby-identifier ruby-title">block_given_p</span>
    <span class="ruby-keyword">return</span> <span class="ruby-constant">Primitive</span>.<span class="ruby-identifier">cexpr!</span> <span class="ruby-string">&#39;SIZED_ENUMERATOR(self, 0, 0, rb_obj_size)&#39;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">yield</span>(<span class="ruby-keyword">self</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-throw" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              throw(tag [, obj])
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Transfers control to the end of the active <code>catch</code> block waiting for <em>tag</em>. Raises <code>UncaughtThrowError</code> if there is no <code>catch</code> block for the <em>tag</em>. The optional second parameter supplies a return value for the <code>catch</code> block, which otherwise defaults to <code>nil</code>. For examples, see Kernel::catch.</p>

          <div class="method-source-code" id="throw-source">
            <pre>static VALUE
rb_f_throw(int argc, VALUE *argv, VALUE _)
{
    VALUE tag, value;

    rb_scan_args(argc, argv, &quot;11&quot;, &amp;tag, &amp;value);
    rb_throw_obj(tag, value);
    UNREACHABLE_RETURN(Qnil);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-trace_var" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              trace_var(symbol, cmd )             &rarr; nil
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              trace_var(symbol) {|val| block }    &rarr; nil
            </span>
          </div>
        </div>

        <div class="method-description">
          <p>Controls tracing of assignments to global variables. The parameter <code>symbol</code> identifies the variable (as either a string name or a symbol identifier). <em>cmd</em> (which may be a string or a <code>Proc</code> object) or block is executed whenever the variable is assigned. The block or <code>Proc</code> object receives the variable’s new value as a parameter. Also see Kernel::untrace_var.</p>

<pre class="ruby"><span class="ruby-identifier">trace_var</span> <span class="ruby-value">:$_</span>, <span class="ruby-identifier">proc</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;$_ is now &#39;#{v}&#39;&quot;</span> }
<span class="ruby-identifier">$_</span> = <span class="ruby-string">&quot;hello&quot;</span>
<span class="ruby-identifier">$_</span> = <span class="ruby-string">&#39; there&#39;</span>
</pre>

<p><em>produces:</em></p>

<pre>$_ is now &#39;hello&#39;
$_ is now &#39; there&#39;</pre>

          <div class="method-source-code" id="trace_var-source">
            <pre>static VALUE
f_trace_var(int c, const VALUE *a, VALUE _)
{
    return rb_f_trace_var(c, a);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-trap" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              trap( signal, command ) &rarr; obj
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          <div class="method-heading">
            <span class="method-callseq">
              trap( signal ) {| | block } &rarr; obj
            </span>
          </div>
        </div>

        <div class="method-description">
          <p>Specifies the handling of signals. The first parameter is a signal name (a string such as “SIGALRM”, “SIGUSR1”, and so on) or a signal number. The characters “SIG” may be omitted from the signal name. The command or block specifies code to be run when the signal is raised. If the command is the string “IGNORE” or “SIG_IGN”, the signal will be ignored. If the command is “DEFAULT” or “SIG_DFL”, the Ruby’s default handler will be invoked. If the command is “EXIT”, the script will be terminated by the signal. If the command is “SYSTEM_DEFAULT”, the operating system’s default handler will be invoked. Otherwise, the given command or block will be run. The special signal name “EXIT” or signal number zero will be invoked just prior to program termination. trap returns the previous handler for the given signal.</p>

<pre class="ruby"><span class="ruby-constant">Signal</span>.<span class="ruby-identifier">trap</span>(<span class="ruby-value">0</span>, <span class="ruby-identifier">proc</span> { <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Terminating: #{$$}&quot;</span> })
<span class="ruby-constant">Signal</span>.<span class="ruby-identifier">trap</span>(<span class="ruby-string">&quot;CLD&quot;</span>)  { <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;Child died&quot;</span> }
<span class="ruby-identifier">fork</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">Process</span>.<span class="ruby-identifier">wait</span>
</pre>

<p>produces:</p>

<pre>Terminating: 27461
Child died
Terminating: 27460</pre>

          <div class="method-source-code" id="trap-source">
            <pre>static VALUE
sig_trap(int argc, VALUE *argv, VALUE _)
{
    int sig;
    sighandler_t func;
    VALUE cmd;

    rb_check_arity(argc, 1, 2);

    sig = trap_signm(argv[0]);
    if (reserved_signal_p(sig)) {
        const char *name = signo2signm(sig);
        if (name)
            rb_raise(rb_eArgError, &quot;can&#39;t trap reserved signal: SIG%s&quot;, name);
        else
            rb_raise(rb_eArgError, &quot;can&#39;t trap reserved signal: %d&quot;, sig);
    }

    if (argc == 1) {
        cmd = rb_block_proc();
        func = sighandler;
    }
    else {
        cmd = argv[1];
        func = trap_handler(&amp;cmd, sig);
    }

    if (rb_obj_is_proc(cmd) &amp;&amp;
        !rb_ractor_main_p() &amp;&amp; !rb_ractor_shareable_p(cmd)) {
        cmd = rb_proc_isolate(cmd);
    }

    return trap(sig, func, cmd);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-untrace_var" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              untrace_var(symbol [, cmd] )   &rarr; array or nil
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Removes tracing for the specified command on the given global variable and returns <code>nil</code>. If no command is specified, removes all tracing for that variable and returns an array containing the commands actually removed.</p>

          <div class="method-source-code" id="untrace_var-source">
            <pre>static VALUE
f_untrace_var(int c, const VALUE *a, VALUE _)
{
    return rb_f_untrace_var(c, a);
}</pre>
          </div>
        </div>


      </div>

      <div id="method-i-warn" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              warn(*msgs, uplevel: nil, category: nil)   &rarr; nil
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>If warnings have been disabled (for example with the <code>-W0</code> flag), does nothing.  Otherwise, converts each of the messages to strings, appends a newline character to the string if the string does not end in a newline, and calls <a href="Warning.html#method-i-warn"><code>Warning.warn</code></a> with the string.</p>

<pre>  warn(&quot;warning 1&quot;, &quot;warning 2&quot;)

&lt;em&gt;produces:&lt;/em&gt;

  warning 1
  warning 2</pre>

<p>If the <code>uplevel</code> keyword argument is given, the string will be prepended with information for the given caller frame in the same format used by the <code>rb_warn</code> C function.</p>

<pre>  # In baz.rb
  def foo
    warn(&quot;invalid call to foo&quot;, uplevel: 1)
  end

  def bar
    foo
  end

  bar

&lt;em&gt;produces:&lt;/em&gt;

  baz.rb:6: warning: invalid call to foo</pre>

<p>If <code>category</code> keyword argument is given, passes the category to <code>Warning.warn</code>.  The category given must be be one of the following categories:</p>
<dl class="rdoc-list note-list"><dt>:deprecated 
<dd>
<p>Used for warning for deprecated functionality that may be removed in the future.</p>
</dd><dt>:experimental 
<dd>
<p>Used for experimental features that may change in future releases.</p>
</dd></dl>

          <div class="method-source-code" id="warn-source">
            <pre><span class="ruby-comment"># File warning.rb, line 50</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">warn</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">msgs</span>, <span class="ruby-value">uplevel:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">category:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-constant">Primitive</span>.<span class="ruby-identifier">rb_warn_m</span>(<span class="ruby-identifier">msgs</span>, <span class="ruby-identifier">uplevel</span>, <span class="ruby-identifier">category</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-yield_self" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-callseq">
              yield_self {|x| block }    &rarr; an_object
            </span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Yields self to the block and returns the result of the block.</p>

<pre class="ruby"><span class="ruby-string">&quot;my string&quot;</span>.<span class="ruby-identifier">yield_self</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">upcase</span> }   <span class="ruby-comment">#=&gt; &quot;MY STRING&quot;</span>
</pre>

<p>Good usage for <code>then</code> is value piping in method chains:</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;open-uri&#39;</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;json&#39;</span>

<span class="ruby-identifier">construct_url</span>(<span class="ruby-identifier">arguments</span>).
  <span class="ruby-identifier">then</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">url</span><span class="ruby-operator">|</span> <span class="ruby-constant">URI</span>(<span class="ruby-identifier">url</span>).<span class="ruby-identifier">read</span> }.
  <span class="ruby-identifier">then</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">response</span><span class="ruby-operator">|</span> <span class="ruby-constant">JSON</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">response</span>) }
</pre>

          <div class="method-source-code" id="yield_self-source">
            <pre><span class="ruby-comment"># File kernel.rb, line 144</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">yield_self</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-constant">Primitive</span>.<span class="ruby-identifier">block_given_p</span>
    <span class="ruby-keyword">return</span> <span class="ruby-constant">Primitive</span>.<span class="ruby-identifier">cexpr!</span> <span class="ruby-string">&#39;SIZED_ENUMERATOR(self, 0, 0, rb_obj_size)&#39;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">yield</span>(<span class="ruby-keyword">self</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

    </section>

     <section id="private-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Private Instance Methods</h3>
       </header>

      <div id="method-i-JSON" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">JSON</span><span
              class="method-args">(object, *args)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>If <em>object</em> is string-like, parse the string and return the parsed result as a Ruby data structure. Otherwise, generate a <a href="JSON.html"><code>JSON</code></a> text from the Ruby data structure object and return it.</p>

<p>The <em>opts</em> argument is passed through to generate/parse respectively. See generate and parse for their documentation.</p>

          <div class="method-source-code" id="JSON-source">
            <pre><span class="ruby-comment"># File ext/json/lib/json/common.rb, line 685</span>
<span class="ruby-keyword">def</span> <span class="ruby-constant">JSON</span>(<span class="ruby-identifier ruby-title">object</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">respond_to?</span> <span class="ruby-value">:to_str</span>
    <span class="ruby-constant">JSON</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">object</span>.<span class="ruby-identifier">to_str</span>, <span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">JSON</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">object</span>, <span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-URI" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">URI</span><span
              class="method-args">(uri)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Returns <code>uri</code> converted to an <a href="URI.html"><code>URI</code></a> object.</p>

          <div class="method-source-code" id="URI-source">
            <pre><span class="ruby-comment"># File lib/uri/common.rb, line 718</span>
<span class="ruby-keyword">def</span> <span class="ruby-constant">URI</span>(<span class="ruby-identifier ruby-title">uri</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">Generic</span>)
    <span class="ruby-identifier">uri</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">uri</span> = <span class="ruby-constant">String</span>.<span class="ruby-identifier">try_convert</span>(<span class="ruby-identifier">uri</span>)
    <span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">uri</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>,
      <span class="ruby-string">&quot;bad argument (expected URI object or URI string)&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-gem" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">gem</span><span
              class="method-args">(gem_name, *requirements)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Use <a href="Kernel.html#method-i-gem"><code>Kernel#gem</code></a> to activate a specific version of <code>gem_name</code>.</p>

<p><code>requirements</code> is a list of version requirements that the specified gem must match, most commonly “= example.version.number”.  See <a href="Gem/Requirement.html"><code>Gem::Requirement</code></a> for how to specify a version requirement.</p>

<p>If you will be activating the latest version of a gem, there is no need to call <a href="Kernel.html#method-i-gem"><code>Kernel#gem</code></a>, <a href="Kernel.html#method-i-require"><code>Kernel#require</code></a> will do the right thing for you.</p>

<p><a href="Kernel.html#method-i-gem"><code>Kernel#gem</code></a> returns true if the gem was activated, otherwise false.  If the gem could not be found, didn’t match the version requirements, or a different version was already activated, an exception will be raised.</p>

<p><a href="Kernel.html#method-i-gem"><code>Kernel#gem</code></a> should be called <strong>before</strong> any require statements (otherwise RubyGems may load a conflicting library version).</p>

<p><a href="Kernel.html#method-i-gem"><code>Kernel#gem</code></a> only loads prerelease versions when prerelease <code>requirements</code> are given:</p>

<pre class="ruby"><span class="ruby-identifier">gem</span> <span class="ruby-string">&#39;rake&#39;</span>, <span class="ruby-string">&#39;&gt;= 1.1.a&#39;</span>, <span class="ruby-string">&#39;&lt; 2&#39;</span>
</pre>

<p>In older RubyGems versions, the environment variable GEM_SKIP could be used to skip activation of specified gems, for example to test out changes that haven’t been installed yet.  Now RubyGems defers to -I and the RUBYLIB environment variable to skip activation of a gem.</p>

<p>Example:</p>

<pre>GEM_SKIP=libA:libB ruby -I../libA -I../libB ./mycode.rb</pre>

          <div class="method-source-code" id="gem-source">
            <pre><span class="ruby-comment"># File lib/rubygems/core_ext/kernel_gem.rb, line 36</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">gem</span>(<span class="ruby-identifier">gem_name</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">requirements</span>) <span class="ruby-comment"># :doc:</span>
  <span class="ruby-identifier">skip_list</span> = (<span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;GEM_SKIP&quot;</span>] <span class="ruby-operator">||</span> <span class="ruby-string">&quot;&quot;</span>).<span class="ruby-identifier">split</span>(<span class="ruby-regexp">/:/</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">LoadError</span>, <span class="ruby-node">&quot;skipping #{gem_name}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">skip_list</span>.<span class="ruby-identifier">include?</span> <span class="ruby-identifier">gem_name</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">gem_name</span>.<span class="ruby-identifier">kind_of?</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependency</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Deprecate</span>.<span class="ruby-identifier">skip</span>
      <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;#{Gem.location_of_caller.join &#39;:&#39;}:Warning: Kernel.gem no longer &quot;</span>\
        <span class="ruby-string">&quot;accepts a Gem::Dependency object, please pass the name &quot;</span>\
        <span class="ruby-string">&quot;and requirements directly&quot;</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">requirements</span> = <span class="ruby-identifier">gem_name</span>.<span class="ruby-identifier">requirement</span>
    <span class="ruby-identifier">gem_name</span> = <span class="ruby-identifier">gem_name</span>.<span class="ruby-identifier">name</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">dep</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependency</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">gem_name</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">requirements</span>)

  <span class="ruby-identifier">loaded</span> = <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">loaded_specs</span>[<span class="ruby-identifier">gem_name</span>]

  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">loaded</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">dep</span>.<span class="ruby-identifier">matches_spec?</span>(<span class="ruby-identifier">loaded</span>)

  <span class="ruby-identifier">spec</span> = <span class="ruby-identifier">dep</span>.<span class="ruby-identifier">to_spec</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">spec</span>
    <span class="ruby-keyword">if</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">LOADED_SPECS_MUTEX</span>.<span class="ruby-identifier">owned?</span>
      <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">activate</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">LOADED_SPECS_MUTEX</span>.<span class="ruby-identifier">synchronize</span> { <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">activate</span> }
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-j" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">j</span><span
              class="method-args">(*objs)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Outputs <em>objs</em> to STDOUT as <a href="JSON.html"><code>JSON</code></a> strings in the shortest form, that is in one line.</p>

          <div class="method-source-code" id="j-source">
            <pre><span class="ruby-comment"># File ext/json/lib/json/common.rb, line 663</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">j</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">objs</span>)
  <span class="ruby-identifier">objs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">obj</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">puts</span> <span class="ruby-constant">JSON</span><span class="ruby-operator">::</span><span class="ruby-identifier">generate</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-value">:allow_nan</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">:max_nesting</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">false</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-jj" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">jj</span><span
              class="method-args">(*objs)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Outputs <em>objs</em> to STDOUT as <a href="JSON.html"><code>JSON</code></a> strings in a pretty format, with indentation and over many lines.</p>

          <div class="method-source-code" id="jj-source">
            <pre><span class="ruby-comment"># File ext/json/lib/json/common.rb, line 672</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">jj</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">objs</span>)
  <span class="ruby-identifier">objs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">obj</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">puts</span> <span class="ruby-constant">JSON</span><span class="ruby-operator">::</span><span class="ruby-identifier">pretty_generate</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-value">:allow_nan</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">:max_nesting</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">false</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-pp" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">pp</span><span
              class="method-args">(*objs)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>prints arguments in pretty form.</p>

<p>pp returns argument(s).</p>

          <div class="method-source-code" id="pp-source">
            <pre><span class="ruby-comment"># File lib/pp.rb, line 644</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">pp</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">objs</span>)
  <span class="ruby-identifier">objs</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">obj</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">PP</span>.<span class="ruby-identifier">pp</span>(<span class="ruby-identifier">obj</span>)
  }
  <span class="ruby-identifier">objs</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">1</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">objs</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">objs</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: pp
        </div>

      </div>

      <div id="method-i-require" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">require</span><span
              class="method-args">(path)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>When RubyGems is required, <a href="Kernel.html#method-i-require"><code>Kernel#require</code></a> is replaced with our own which is capable of loading gems on demand.</p>

<p>When you call <code>require &#39;x&#39;</code>, this is what happens:</p>
<ul><li>
<p>If the file can be loaded from the existing Ruby loadpath, it is.</p>
</li><li>
<p>Otherwise, installed gems are searched for a file that matches. If it’s found in gem ‘y’, that gem is activated (added to the loadpath).</p>
</li></ul>

<p>The normal <code>require</code> functionality of returning false if that file has already been loaded is preserved.</p>

          <div class="method-source-code" id="require-source">
            <pre><span class="ruby-comment"># File lib/rubygems/core_ext/kernel_require.rb, line 36</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">require</span>(<span class="ruby-identifier">path</span>) <span class="ruby-comment"># :doc:</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">gem_original_require</span>(<span class="ruby-identifier">path</span>) <span class="ruby-keyword">unless</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">discover_gems_on_require</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-constant">RUBYGEMS_ACTIVATION_MONITOR</span>.<span class="ruby-identifier">enter</span>

    <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">to_path</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">respond_to?</span> <span class="ruby-value">:to_path</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">spec</span> = <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">find_unresolved_default_spec</span>(<span class="ruby-identifier">path</span>)
      <span class="ruby-comment"># Ensure -I beats a default gem</span>
      <span class="ruby-identifier">resolved_path</span> = <span class="ruby-keyword">begin</span>
        <span class="ruby-identifier">rp</span> = <span class="ruby-keyword">nil</span>
        <span class="ruby-identifier">load_path_check_index</span> = <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">load_path_insert_index</span> <span class="ruby-operator">-</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">activated_gem_paths</span>
        <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">suffixes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">$LOAD_PATH</span>[<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-identifier">load_path_check_index</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">lp</span><span class="ruby-operator">|</span>
            <span class="ruby-identifier">safe_lp</span> = <span class="ruby-identifier">lp</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">tap</span>(<span class="ruby-operator">&amp;</span><span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">UNTAINT</span>)
            <span class="ruby-keyword">begin</span>
              <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">symlink?</span> <span class="ruby-identifier">safe_lp</span> <span class="ruby-comment"># for backward compatibility</span>
                <span class="ruby-keyword">next</span>
              <span class="ruby-keyword">end</span>
            <span class="ruby-keyword">rescue</span> <span class="ruby-constant">SecurityError</span>
              <span class="ruby-constant">RUBYGEMS_ACTIVATION_MONITOR</span>.<span class="ruby-identifier">exit</span>
              <span class="ruby-identifier">raise</span>
            <span class="ruby-keyword">end</span>

            <span class="ruby-identifier">full_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">safe_lp</span>, <span class="ruby-node">&quot;#{path}#{s}&quot;</span>))
            <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span>(<span class="ruby-identifier">full_path</span>)
              <span class="ruby-identifier">rp</span> = <span class="ruby-identifier">full_path</span>
              <span class="ruby-keyword">break</span>
            <span class="ruby-keyword">end</span>
          <span class="ruby-keyword">end</span>
          <span class="ruby-keyword">break</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">rp</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">rp</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">begin</span>
        <span class="ruby-constant">Kernel</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:gem</span>, <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">name</span>, <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Requirement</span>.<span class="ruby-identifier">default_prerelease</span>)
      <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span>
        <span class="ruby-constant">RUBYGEMS_ACTIVATION_MONITOR</span>.<span class="ruby-identifier">exit</span>
        <span class="ruby-identifier">raise</span>
      <span class="ruby-keyword">end</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">resolved_path</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment"># If there are no unresolved deps, then we can use just try</span>
    <span class="ruby-comment"># normal require handle loading a gem from the rescue below.</span>

    <span class="ruby-keyword">if</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Specification</span>.<span class="ruby-identifier">unresolved_deps</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-constant">RUBYGEMS_ACTIVATION_MONITOR</span>.<span class="ruby-identifier">exit</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">gem_original_require</span>(<span class="ruby-identifier">path</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment"># If +path+ is for a gem that has already been loaded, don&#39;t</span>
    <span class="ruby-comment"># bother trying to find it in an unresolved gem, just go straight</span>
    <span class="ruby-comment"># to normal require.</span>
    <span class="ruby-comment">#--</span>
    <span class="ruby-comment"># TODO request access to the C implementation of this to speed up RubyGems</span>

    <span class="ruby-keyword">if</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Specification</span>.<span class="ruby-identifier">find_active_stub_by_path</span>(<span class="ruby-identifier">path</span>)
      <span class="ruby-constant">RUBYGEMS_ACTIVATION_MONITOR</span>.<span class="ruby-identifier">exit</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">gem_original_require</span>(<span class="ruby-identifier">path</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment"># Attempt to find +path+ in any unresolved gems...</span>

    <span class="ruby-identifier">found_specs</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Specification</span>.<span class="ruby-identifier">find_in_unresolved</span> <span class="ruby-identifier">path</span>

    <span class="ruby-comment"># If there are no directly unresolved gems, then try and find +path+</span>
    <span class="ruby-comment"># in any gems that are available via the currently unresolved gems.</span>
    <span class="ruby-comment"># For example, given:</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment">#   a =&gt; b =&gt; c =&gt; d</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># If a and b are currently active with c being unresolved and d.rb is</span>
    <span class="ruby-comment"># requested, then find_in_unresolved_tree will find d.rb in d because</span>
    <span class="ruby-comment"># it&#39;s a dependency of c.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">found_specs</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-identifier">found_specs</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Specification</span>.<span class="ruby-identifier">find_in_unresolved_tree</span> <span class="ruby-identifier">path</span>

      <span class="ruby-identifier">found_specs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">found_spec</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">found_spec</span>.<span class="ruby-identifier">activate</span>
      <span class="ruby-keyword">end</span>

    <span class="ruby-comment"># We found +path+ directly in an unresolved gem. Now we figure out, of</span>
    <span class="ruby-comment"># the possible found specs, which one we should activate.</span>
    <span class="ruby-keyword">else</span>

      <span class="ruby-comment"># Check that all the found specs are just different</span>
      <span class="ruby-comment"># versions of the same gem</span>
      <span class="ruby-identifier">names</span> = <span class="ruby-identifier">found_specs</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:name</span>).<span class="ruby-identifier">uniq</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">names</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
        <span class="ruby-constant">RUBYGEMS_ACTIVATION_MONITOR</span>.<span class="ruby-identifier">exit</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">LoadError</span>, <span class="ruby-node">&quot;#{path} found in multiple gems: #{names.join &#39;, &#39;}&quot;</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-comment"># Ok, now find a gem that has no conflicts, starting</span>
      <span class="ruby-comment"># at the highest version.</span>
      <span class="ruby-identifier">valid</span> = <span class="ruby-identifier">found_specs</span>.<span class="ruby-identifier">find</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-operator">!</span><span class="ruby-identifier">s</span>.<span class="ruby-identifier">has_conflicts?</span> }

      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">valid</span>
        <span class="ruby-identifier">le</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">LoadError</span>.<span class="ruby-identifier">new</span> <span class="ruby-node">&quot;unable to find a version of &#39;#{names.first}&#39; to activate&quot;</span>
        <span class="ruby-identifier">le</span>.<span class="ruby-identifier">name</span> = <span class="ruby-identifier">names</span>.<span class="ruby-identifier">first</span>
        <span class="ruby-constant">RUBYGEMS_ACTIVATION_MONITOR</span>.<span class="ruby-identifier">exit</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-identifier">le</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-identifier">valid</span>.<span class="ruby-identifier">activate</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-constant">RUBYGEMS_ACTIVATION_MONITOR</span>.<span class="ruby-identifier">exit</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">gem_original_require</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">LoadError</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">load_error</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">load_error</span>.<span class="ruby-identifier">path</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">path</span>
      <span class="ruby-constant">RUBYGEMS_ACTIVATION_MONITOR</span>.<span class="ruby-identifier">enter</span>

      <span class="ruby-keyword">begin</span>
        <span class="ruby-identifier">require_again</span> = <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">try_activate</span>(<span class="ruby-identifier">path</span>)
      <span class="ruby-keyword">ensure</span>
        <span class="ruby-constant">RUBYGEMS_ACTIVATION_MONITOR</span>.<span class="ruby-identifier">exit</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">return</span> <span class="ruby-identifier">gem_original_require</span>(<span class="ruby-identifier">path</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">require_again</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">raise</span> <span class="ruby-identifier">load_error</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="Kernel.html#method-i-syntax_suggest_original_require">syntax_suggest_original_require</a>
        </div>

      </div>

      <div id="method-i-y" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">y</span><span
              class="method-args">(*objects)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>An alias for <a href="Psych.html#method-c-dump_stream"><code>Psych.dump_stream</code></a> meant to be used with <a href="IRB.html"><code>IRB</code></a>.</p>

          <div class="method-source-code" id="y-source">
            <pre><span class="ruby-comment"># File ext/psych/lib/psych/y.rb, line 5</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">y</span> <span class="ruby-operator">*</span><span class="ruby-identifier">objects</span>
  <span class="ruby-identifier">puts</span> <span class="ruby-constant">Psych</span>.<span class="ruby-identifier">dump_stream</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">objects</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

    </section>

  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.5.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

